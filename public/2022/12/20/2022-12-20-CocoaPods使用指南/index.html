<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>CocoaPodsä½¿ç”¨æŒ‡å—</title><meta name="description" content="ä¸ä»¥åŠŸåˆ©ä¸ºç›®çš„."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q || []).push(arguments)},i[r].l=1 * new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'GmOiGEvbpJTlBAXAXlJZrGhRTZOlLBC_CZ2yJaZ_Ktk', 'https://www.nihao.cn/');
ga('send', 'pageview');</script><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/avatar.jpeg"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="å‰è¨€å¯¹äºå¤§å¤šæ•°è½¯ä»¶å¼€å‘å›¢é˜Ÿæ¥è¯´ï¼Œä¾èµ–ç®¡ç†å·¥å…·å¿…ä¸å¯å°‘ï¼Œå®ƒèƒ½é’ˆå¯¹å¼€æºå’Œç§æœ‰ä¾èµ–è¿›è¡Œå®‰è£…ä¸ç®¡ç†ï¼Œä»è€Œæå‡å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚é’ˆå¯¹ä¸åŒçš„è¯­è¨€ä¸å¹³å°ï¼Œå…¶ä¾èµ–ç®¡ç†å·¥å…·ä¹Ÿå„æœ‰ä¸åŒï¼Œä¾‹å¦‚ npm ç®¡ç† Javascriptã€Gradle ã€Maven ç®¡ç† Jar åŒ…ã€pip ç®¡ç† Python åŒ…ï¼ŒBundlerã€RubyGems ç­‰ç­‰ã€‚æœ¬æ–‡èšç„¦äº iOS æ–¹é¢ï¼Œå¯¹ CocoaPods çš„ä½¿ç”¨å’Œéƒ¨åˆ†åŸç†è¿›è¡Œé˜è¿°ã€‚

ç®€å•æ˜“ç”¨çš„ CocoaPodså¯¹äº iOSer æ¥è¯´ï¼ŒCocoaPods å¹¶ä¸é™Œç”Ÿï¼Œå‡ ä¹æ‰€æœ‰çš„ iOS å·¥ç¨‹éƒ½ä¼šæœ‰å®ƒçš„èº«å½±ã€‚CocoaPods é‡‡ç”¨ Ruby æ„å»ºï¼Œå®ƒæ˜¯ Swift å’Œ Objective-C Cocoa é¡¹ç›®çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚åœ¨ MacOS ä¸Šï¼Œæ¨èä½¿ç”¨é»˜è®¤çš„ Ruby è¿›è¡Œå®‰è£… (ä»¥.."><meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="nihao' Blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">nihao's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">CocoaPodsä½¿ç”¨æŒ‡å—</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%98%93%E7%94%A8%E7%9A%84-CocoaPods"><span class="toc-text">ç®€å•æ˜“ç”¨çš„ CocoaPods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pod-install-vs-pod-update"><span class="toc-text">pod install vs. pod update</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Podfile-%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="toc-text">Podfile è¯­æ³•è§„èŒƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Root-Options"><span class="toc-text">Root Options</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dependencies"><span class="toc-text">Dependencies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Target-configuration"><span class="toc-text">Target configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Workspace"><span class="toc-text">Workspace</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sources"><span class="toc-text">Sources</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hooks"><span class="toc-text">Hooks</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#podspec-%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="toc-text">podspec è¯­æ³•è§„èŒƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Root"><span class="toc-text">Root</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Platform"><span class="toc-text">Platform</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Build-settings"><span class="toc-text">Build settings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#File-patterns"><span class="toc-text">File patterns</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subspecs"><span class="toc-text">Subspecs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Multi-Platform-support"><span class="toc-text">Multi-Platform support</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pod-%E7%9A%84%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-text">Pod çš„å¼€å‘æµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spec-Repo"><span class="toc-text">Spec Repo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create"><span class="toc-text">Create</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Development"><span class="toc-text">Development</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Testing"><span class="toc-text">Testing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Release"><span class="toc-text">Release</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Semantic-Versioning"><span class="toc-text">Semantic Versioning</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CocoaPods-%E5%8E%9F%E7%90%86%E6%B5%85%E6%9E%90"><span class="toc-text">CocoaPods åŸç†æµ…æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CococaPods-%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="toc-text">CococaPods æ ¸å¿ƒç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pod-install-%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88"><span class="toc-text">pod install åšäº†ä»€ä¹ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Install-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87%EF%BC%88prepare%EF%BC%89"><span class="toc-text">1. Install ç¯å¢ƒå‡†å¤‡ï¼ˆprepareï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%A7%A3%E5%86%B3%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81%EF%BC%88resolve-dependencies%EF%BC%89"><span class="toc-text">2. è§£å†³ä¾èµ–å†²çªï¼ˆresolve dependenciesï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96%E6%96%87%E4%BB%B6%EF%BC%88download-dependencies%EF%BC%89"><span class="toc-text">3. ä¸‹è½½ä¾èµ–æ–‡ä»¶ï¼ˆdownload dependenciesï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%AA%8C%E8%AF%81-targets%EF%BC%88validate-targets%EF%BC%89"><span class="toc-text">4. éªŒè¯ targetsï¼ˆvalidate targetsï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%94%9F%E6%88%90%E5%B7%A5%E7%A8%8B%EF%BC%88Integrate%EF%BC%89"><span class="toc-text">5. ç”Ÿæˆå·¥ç¨‹ï¼ˆIntegrateï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%86%99%E5%85%A5%E4%BE%9D%E8%B5%96%EF%BC%88write-lockfiles%EF%BC%89"><span class="toc-text">6. å†™å…¥ä¾èµ–ï¼ˆwrite lockfilesï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E7%BB%93%E6%9D%9F%E5%9B%9E%E8%B0%83%EF%BC%88perform-post-install-action%EF%BC%89"><span class="toc-text">7. ç»“æŸå›è°ƒï¼ˆperform post install actionï¼‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CocoaPods-Plugins"><span class="toc-text">CocoaPods + Plugins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%A4%AA%E5%B8%B8%E8%A7%81%E6%A6%82%E5%BF%B5"><span class="toc-text">ä¸å¤ªå¸¸è§æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%97%EF%BC%9A"><span class="toc-text">ğŸ”—ï¼š</span></a></li></ol></div><div class="column is-9"><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">CocoaPodsä½¿ç”¨æŒ‡å—</h1><header class="my-5"><a href="/tags/CocoaPods"><i class="tag post-item-tag">CocoaPods</i></a><time class="has-text-grey" datetime="2022-12-20T12:57:00.000Z">2022-12-20</time></header><article class="mt-2 post-content"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¯¹äºå¤§å¤šæ•°è½¯ä»¶å¼€å‘å›¢é˜Ÿæ¥è¯´ï¼Œä¾èµ–ç®¡ç†å·¥å…·å¿…ä¸å¯å°‘ï¼Œå®ƒèƒ½é’ˆå¯¹å¼€æºå’Œç§æœ‰ä¾èµ–è¿›è¡Œå®‰è£…ä¸ç®¡ç†ï¼Œä»è€Œæå‡å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚é’ˆå¯¹ä¸åŒçš„è¯­è¨€ä¸å¹³å°ï¼Œå…¶ä¾èµ–ç®¡ç†å·¥å…·ä¹Ÿå„æœ‰ä¸åŒï¼Œä¾‹å¦‚ npm ç®¡ç† Javascriptã€Gradle ã€Maven ç®¡ç† Jar åŒ…ã€pip ç®¡ç† Python åŒ…ï¼ŒBundlerã€RubyGems ç­‰ç­‰ã€‚æœ¬æ–‡èšç„¦äº iOS æ–¹é¢ï¼Œå¯¹ CocoaPods çš„ä½¿ç”¨å’Œéƒ¨åˆ†åŸç†è¿›è¡Œé˜è¿°ã€‚</p>
<span id="more"></span>
<h2 id="ç®€å•æ˜“ç”¨çš„-CocoaPods"><a href="#ç®€å•æ˜“ç”¨çš„-CocoaPods" class="headerlink" title="ç®€å•æ˜“ç”¨çš„ CocoaPods"></a>ç®€å•æ˜“ç”¨çš„ CocoaPods</h2><p>å¯¹äº iOSer æ¥è¯´ï¼ŒCocoaPods å¹¶ä¸é™Œç”Ÿï¼Œå‡ ä¹æ‰€æœ‰çš„ iOS å·¥ç¨‹éƒ½ä¼šæœ‰å®ƒçš„èº«å½±ã€‚CocoaPods é‡‡ç”¨ Ruby æ„å»ºï¼Œå®ƒæ˜¯ Swift å’Œ Objective-C Cocoa é¡¹ç›®çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚åœ¨ MacOS ä¸Šï¼Œæ¨èä½¿ç”¨é»˜è®¤çš„ Ruby è¿›è¡Œå®‰è£… (ä»¥ä¸‹æ“ä½œå‡åœ¨ CocoaPods 1.10.1ã€Ruby 2.7.2 è¿›è¡Œ)ï¼š</p>
<pre><code class="shell">sudo gem install cocoapods
</code></pre>
<p>å¦‚æœå®‰è£…æˆåŠŸï¼Œä¾¿å¯ä»¥ä½¿ç”¨ pod çš„ç›¸å…³å‘½ä»¤äº†ã€‚é’ˆå¯¹ä¸€ä¸ªç®€å•çš„é¡¹ç›®æ¥è¯´ï¼Œåªéœ€ä¸‰æ­¥ä¾¿å¯å¼•å…¥å…¶ä»–çš„ä¾èµ–ï¼š</p>
<ol>
<li>åˆ›å»º Podfile æ–‡ä»¶( CocoaPods æä¾›äº† pod init å‘½ä»¤åˆ›å»º)</li>
<li>å¯¹ Podfile æ–‡ä»¶è¿›è¡Œç¼–å†™ï¼Œæ·»åŠ ä¾èµ–çš„åº“ï¼Œç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚</li>
<li>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ <code>pod install</code> å‘½ä»¤</li>
</ol>
<p>é¡ºåˆ©çš„è¯ï¼Œè¿™æ—¶åœ¨é¡¹ç›®ç›®å½•ä¸‹ä¼šå‡ºç°ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<ul>
<li>.xcworkspaceï¼šCocoaPods å°†é¡¹ç›®åˆ†ä¸ºäº†ä¸»å·¥ç¨‹ä¸ä¾èµ–å·¥ç¨‹(Pods)ã€‚ä¸ .xcodeproj ç›¸æ¯” .xcworkspace å¯¹äºç®¡ç†å¤šä¸ªé¡¹ç›®çš„èƒ½åŠ›æ›´å¼ºï¼Œä½ ä¹Ÿå¯ä»¥å°†å¤æ‚çš„å¤§å‹åº”ç”¨è½¬æ¢ä¸ºä»¥ .xcworkspace æ„å»ºçš„å¤šä¸ªå…„å¼Ÿé¡¹ç›®ï¼Œä»è€Œæ›´è½»æ¾çš„ç»´æŠ¤å’Œå…±äº«åŠŸèƒ½ã€‚</li>
<li>Podfile.lockï¼šè®°å½•å¹¶è·Ÿè¸ªä¾èµ–åº“ç‰ˆæœ¬ï¼Œå°†ä¾èµ–åº“é”å®šäºæŸä¸ªç‰ˆæœ¬ã€‚</li>
<li>Pods æ–‡ä»¶å¤¹ï¼šå­˜æ”¾ä¾èµ–åº“ä»£ç ã€‚</li>
<li>Pods/Manifest.lockï¼šæ¯æ¬¡ <code>pod install</code> æ—¶åˆ›å»ºçš„ Podfile.lock çš„å‰¯æœ¬ï¼Œç”¨äºæ¯”è¾ƒè¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒPodfile.lock ä¼šçº³å…¥ç‰ˆæœ¬æ§åˆ¶ç®¡ç†ï¼Œè€Œ Pods æ–‡ä»¶å¤¹åˆ™ä¸ä¼šçº³å…¥ç‰ˆæœ¬æ§åˆ¶å˜æ›´ï¼›è¿™æ„å‘³ç€ Podfile.lock è¡¨ç¤ºé¡¹ç›®åº”è¯¥ä¾èµ–çš„åº“ç‰ˆæœ¬ä¿¡æ¯ï¼Œè€Œ Manifest.lock åˆ™ä»£è¡¨æœ¬åœ° Pods çš„ä¾èµ–åº“ç‰ˆæœ¬ä¿¡æ¯ã€‚åœ¨ pod install åä¼šå°†è„šæœ¬æ’å…¥åˆ° Build Phasesï¼Œåä¸º <code>[CP] Check Pods Manifest.lock</code>ï¼Œä»è€Œä¿è¯å¼€å‘è€…åœ¨è¿è¡Œ app ä¹‹å‰èƒ½å¤Ÿæ›´æ–° Podsï¼Œä»¥ç¡®ä¿ä»£ç æ˜¯æœ€æ–°çš„ã€‚</li>
</ul>
<h2 id="pod-install-vs-pod-update"><a href="#pod-install-vs-pod-update" class="headerlink" title="pod install vs. pod update"></a>pod install vs. pod update</h2><ul>
<li><code>pod install</code>ï¼šåœ¨æ¯ä¸€æ¬¡ç¼–è¾‘ Podfile ä»¥æ·»åŠ ã€æ›´æ–°æˆ–åˆ é™¤ pod æ—¶ä½¿ç”¨ã€‚å®ƒä¼šä¸‹è½½å¹¶å®‰è£…æ–°çš„ Podï¼Œå¹¶å°†å…¶ç‰ˆæœ¬ä¿¡æ¯å†™å…¥ Podfile.lock ä¸­ã€‚</li>
<li><code>pod outdated</code>ï¼šåˆ—å‡ºæ‰€æœ‰æ¯” Podfile.lock ä¸­å½“å‰è®°å½•çš„ç‰ˆæœ¬ newer ç‰ˆæœ¬çš„ podã€‚</li>
<li><code>pod update [PODNAME]</code>ï¼šCocoaPods ä¼šæŸ¥æ‰¾ newer ç‰ˆæœ¬çš„ PODNAMEï¼ŒåŒæ—¶å°† pod æ›´æ–°åˆ°å¯èƒ½çš„æœ€æ–°ç‰ˆæœ¬(é¡»ç¬¦åˆ Podfile é™åˆ¶)ã€‚è‹¥æ²¡æœ‰ PODNAMEï¼Œåˆ™ä¼šå°†æ¯ä¸€ä¸ª pod æ›´æ–°åˆ°å¯èƒ½çš„æœ€æ–°ç‰ˆæœ¬ã€‚</li>
</ul>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ¯æ¬¡ç¼–è¾‘ Podfile æ—¶ä½¿ç”¨ <code>pod install</code>ï¼Œä»…åœ¨éœ€è¦æ›´æ–°æŸä¸ª pod ç‰ˆæœ¬(æ‰€æœ‰ç‰ˆæœ¬)æ—¶æ‰ä½¿ç”¨ pod updateã€‚åŒæ—¶ï¼Œéœ€æäº¤ Podfile.lock æ–‡ä»¶è€Œä¸æ˜¯ Pods æ–‡ä»¶å¤¹æ¥è¾¾åˆ°åŒæ­¥æ‰€æœ‰ pod ç‰ˆæœ¬çš„ç›®çš„ã€‚</p>
<p>ps: newer ä»£è¡¨æ›´åŠ æ–°çš„ï¼Œè‹¥é‡‡ç”¨ä¸­æ–‡ç†è§£èµ·æ¥æ¯”è¾ƒåˆ«æ‰­ã€‚</p>
<h2 id="Podfile-è¯­æ³•è§„èŒƒ"><a href="#Podfile-è¯­æ³•è§„èŒƒ" class="headerlink" title="Podfile è¯­æ³•è§„èŒƒ"></a>Podfile è¯­æ³•è§„èŒƒ</h2><p>Podfile æè¿°äº†ä¸€ä¸ªæˆ–å¤šä¸ª Xcode é¡¹ç›®çš„ target ä¾èµ–å…³ç³»ï¼Œå®ƒæ˜¯ä¸€ç§ DSLï¼Œäº†è§£å®ƒå¯¹æˆ‘ä»¬ä½¿ç”¨å¥½ CocoaPods æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ­¥éª¤ã€‚ä¸‹é¢åˆ—å‡ºå…¶ç›¸å…³çš„è¯­æ³•è§„èŒƒï¼š</p>
<h3 id="Root-Options"><a href="#Root-Options" class="headerlink" title="Root Options"></a>Root Options</h3><p>installï¼šæŒ‡å®š CocoaPods å®‰è£… Podfile æ—¶ä½¿ç”¨çš„å®‰è£…æ–¹æ³•å’Œé€‰é¡¹ã€‚å¦‚ï¼š</p>
<pre><code class="ruby">install! 'cocoapods',
         :deterministic_uuids =&gt; false,
         :integrate_targets =&gt; false
</code></pre>
<ul>
<li><code>:clean</code>ï¼šæ ¹æ® podspec å’Œé¡¹ç›®æ”¯æŒå¹³å°çš„æŒ‡å®šï¼Œæ¸…ç†æ‰€æœ‰ä¸è¢« pod ä½¿ç”¨çš„æ–‡ä»¶ï¼Œé»˜è®¤ä¸º trueã€‚</li>
<li><code>:deduplicate_targets</code>ï¼šæ˜¯å¦å¯¹ pod target è¿›è¡Œé‡å¤æ•°æ®åˆ é™¤ï¼Œé»˜è®¤ä¸º trueã€‚</li>
<li><code>:deterministic_uuids</code>ï¼šåˆ›å»º pod project æ˜¯å¦äº§ç”Ÿç¡®å®šæ€§ UUIDï¼Œé»˜è®¤ä¸º trueã€‚</li>
<li><code>:integrate_targets</code>ï¼šæ˜¯å¦ç»§æ‰¿åˆ°ç”¨æˆ·é¡¹ç›®ä¸­ï¼Œä¸º false ä¼šå°† Pod ä¸‹è½½å¹¶å®‰è£…åˆ°åˆ° project_path/Pods ç›®å½•ä¸‹ï¼Œé»˜è®¤ä¸º trueã€‚</li>
<li><code>:lock_pos_sources</code>ï¼šæ˜¯å¦é”å®š pod çš„æºæ–‡ä»¶ï¼Œå½“ Xcode å°è¯•ä¿®æ”¹æ—¶ä¼šæç¤ºè§£é”æ–‡ä»¶ï¼Œé»˜è®¤ä¸º trueã€‚</li>
<li><code>:warn_for_multiple_pod_sources</code>ï¼šå½“å¤šä¸ª source åŒ…å«åŒååŒç‰ˆæœ¬ pod æ—¶æ˜¯å¦å‘å‡ºè­¦å‘Šï¼Œé»˜è®¤ä¸º trueã€‚</li>
<li><code>:warn_for_unused_master_specs_repo</code>ï¼šå¦‚æœæ²¡æœ‰æ˜ç¡®æŒ‡å‡º master specs repo çš„ git æ˜¯å¦å‘å‡ºè­¦å‘Šï¼Œé»˜è®¤ä¸º trueã€‚</li>
<li><code>:share_schemes_for_development_pods</code>ï¼šæ˜¯å¦ä¸ºå¼€å‘ä¸­çš„ pod åˆ†äº« schemesï¼Œé»˜è®¤ä¸º falseã€‚</li>
<li><code>:disable_input_output_paths</code>ï¼šæ˜¯å¦ç¦ç”¨ CocoaPods è„šæœ¬é˜¶æ®µçš„è¾“å…¥è¾“å‡ºè·¯å¾„ï¼ˆCopy Frameworks å’Œ Copy Resourcesï¼‰ï¼Œé»˜è®¤ä¸º falseã€‚</li>
<li><code>:preserve_pod_file_structure</code>ï¼šæ˜¯å¦ä¿ç•™æ‰€æœ‰ pod çš„æ–‡ä»¶ç»“æ„ï¼Œé»˜è®¤ä¸º falseã€‚</li>
<li><code>:generate_multiple_pod_projects</code>ï¼šæ˜¯å¦ä¸ºæ¯ä¸€ä¸ª pod target ç”Ÿæˆ ä¸€ä¸ª projectï¼Œç”Ÿæˆä¸ Pods/Pods æ–‡ä»¶å¤¹ä¸­ï¼Œé»˜è®¤ä¸º falseã€‚</li>
<li><code>:incremental_installation</code>ï¼šä»…å¯¹è‡ªä¸Šæ¬¡å®‰è£…çš„ target ä¸å…¶å…³è”çš„ project çš„å˜æ›´éƒ¨åˆ†è¿›è¡Œé‡æ–°ç”Ÿæˆï¼Œé»˜è®¤ä¸º falseã€‚</li>
<li><code>:skip_pods_project_generation</code>ï¼šæ˜¯å¦è·³è¿‡ç”Ÿæˆ Pods.xcodeproj å¹¶ä»…è¿›è¡Œä¾èµ–é¡¹è§£æä¸ä¸‹è½½ï¼Œé»˜è®¤ä¸º falseã€‚</li>
</ul>
<p>ensure_bundler!ï¼šå½“ bundler ç‰ˆæœ¬ä¸åŒ¹é…æ—¶å‘å‡ºè­¦å‘Šã€‚</p>
<pre><code class="ruby">ensure_bundler! '~&gt; 2.0.0'
</code></pre>
<h3 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h3><p><strong>pod</strong>ï¼šæŒ‡å®šé¡¹ç›®çš„ä¾èµ–é¡¹</p>
<ul>
<li>ä¾èµ–ç‰ˆæœ¬æ§åˆ¶ï¼š=ã€&gt;ã€&gt;=ã€&lt;ã€&lt;= ä¸ºå­—é¢æ„æ€ï¼›~&gt; 0.1.2 è¡¨ç¤º 0.1.2 &lt;= currVersion &lt; 0.2 ä¹‹é—´çš„ç¬¦åˆè¦æ±‚çš„æœ€æ–°ç‰ˆæœ¬ç‰ˆæœ¬ã€‚</li>
<li>Build configurationsï¼šé»˜è®¤ä¾èµ–å®‰è£…åœ¨æ‰€æœ‰çš„æ„å»ºé…ç½®ä¸­ï¼Œä½†ä¹Ÿå¯ä»…åœ¨æŒ‡å®šæ„å»ºé…ç½®ä¸­å¯ç”¨ã€‚</li>
<li>Modular Headersï¼šç”¨äºå°† pod è½¬æ¢ä¸º module ä»¥æ”¯æŒæ¨¡å—ï¼Œè¿™æ—¶åœ¨ Swift ä¸­å¯ä»¥ä¸ç”¨å€ŸåŠ© <code>bridging-header</code> æ¡¥æ¥å°±å¯ä»¥ç›´æ¥å¯¼å…¥ï¼Œç®€åŒ–äº† Swift å¼•ç”¨ Objective-C çš„æ–¹å¼ï¼›ä¹Ÿå¯ä»¥é‡‡ç”¨ <code>use_modular_headers!</code> è¿›è¡Œå…¨å±€çš„å˜æ›´ã€‚</li>
<li>Sourceï¼šæŒ‡å®šå…·æœ‰ä¾èµ–é¡¹çš„æºï¼ŒåŒæ—¶ä¼šå¿½ç•¥å…¨å±€æºã€‚</li>
<li>Subspecsï¼šé»˜è®¤ä¼šå®‰è£…æ‰€æœ‰çš„ subspecsï¼Œä½†å¯åˆ¶å®šå®‰è£…æŸäº› subspecsã€‚</li>
<li>Test Specsï¼šé»˜è®¤ä¸ä¼šå®‰è£… test specsï¼Œä½†å¯é€‰æ‹©æ€§å®‰è£… test specsã€‚</li>
<li>Local pathï¼šå°†å¼€å‘çš„ pod ä¸å…¶å®¢æˆ·ç«¯ä¸€èµ·ä½¿ç”¨ï¼Œå¯é‡‡ç”¨ pathã€‚</li>
<li>æŒ‡å®šæŸä¸ªç‰¹æ®Šæˆ–è€…æ›´ä¸ºå…ˆè¿›çš„ pod ç‰ˆæœ¬</li>
</ul>
<pre><code class="ruby"># ä¾èµ–ç‰ˆæœ¬æ§åˆ¶
pod 'Objection', '~&gt; 0.9' 
# Build configurations
pod 'PonyDebugger', :configurations =&gt; ['Debug', 'Beta'] 
# Modular Headers
pod 'SSZipArchive', :modular_headers =&gt; true 
# Source
pod 'PonyDebugger', :source =&gt; 'https://github.com/CocoaPods/Specs.git'
# Subspecs
pod 'QueryKit', :subspecs =&gt; ['Attribute', 'QuerySet'] 
# Test Specs
pod 'AFNetworking', :testspecs =&gt; ['UnitTests', 'SomeOtherTests']
# Local path
pod 'AFNetworking', :path =&gt; '~/Documents/AFNetworking'
# æŒ‡å®šæŸä¸ªç‰¹æ®Šæˆ–è€…æ›´ä¸ºå…ˆè¿›çš„ Pod ç‰ˆæœ¬
pod 'AFNetworking', :git =&gt; 'https://github.com/gowalla/AFNetworking.git', :branch =&gt; 'dev'
pod 'AFNetworking', :git =&gt; 'https://github.com/gowalla/AFNetworking.git', :tag =&gt; '0.7.0'
pod 'AFNetworking', :git =&gt; 'https://github.com/gowalla/AFNetworking.git', :commit =&gt; '082f8319af'
# æŒ‡å®šæŸä¸ª podspec
pod 'JSONKit', :podspec =&gt; 'https://example.com/JSONKit.podspec'
</code></pre>
<p><strong>inherit</strong>ï¼šè®¾ç½®å½“å‰ target çš„ç»§æ‰¿æ¨¡å¼ã€‚</p>
<p><code>:complete</code> ç»§æ‰¿çˆ¶çº§ target çš„æ‰€æœ‰è¡Œä¸ºï¼Œ<code>:none</code> ä¸ç»§æ‰¿çˆ¶çº§ target çš„ä»»ä½•è¡Œä¸ºï¼Œ<code>:search_paths</code> ä»…ç»§æ‰¿çˆ¶çº§çš„æœç´¢è·¯å¾„ã€‚</p>
<pre><code class="ruby">target 'App' do
  target 'AppTests' do
    inherit! :search_paths
  end
end
</code></pre>
<p><strong>target</strong>ï¼šä¸ Xcode ä¸­çš„ target ç›¸å¯¹åº”ï¼Œblock ä¸­æ˜¯ target çš„ä¾èµ–é¡¹ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œtarget åŒ…å«åœ¨çˆ¶çº§ target å®šä¹‰çš„ä¾èµ–é¡¹ï¼Œä¹Ÿå³ <code>inherit!</code> ä¸º <code>:complete</code>ã€‚å…³äº <code>:complete</code> å’Œ <code>:search_paths</code>ï¼Œ<code>:complete</code> ä¼šæ‹·è´çˆ¶çº§ target çš„ pod å‰¯æœ¬ï¼Œè€Œ <code>:search_paths</code> åˆ™åªè¿›è¡Œ <code>FRAMEWORK_SEARCH_PATHS</code> å’Œ <code>HEADER_SEARCH_PATHS</code> çš„ç›¸å…³æ‹·è´ï¼Œå…·ä½“å¯é€šè¿‡æ¯”å¯¹ Pods/Target Support Files çš„ç›¸å…³æ–‡ä»¶å¾—ä»¥éªŒè¯ï¼Œä¸€èˆ¬åœ¨ <code>UnitTests</code> ä¸­ä½¿ç”¨ï¼Œä»¥å‡å°‘å¤šä½™çš„ <code>install_framework</code> è¿‡ç¨‹ã€‚</p>
<pre><code class="ruby">target 'ShowsApp' do
  pod 'ShowsKit'
  # æ‹¥æœ‰ ShowsKit å’Œ ShowTVAuth çš„æ‹·è´
  target 'ShowsTV' do
    pod 'ShowTVAuth'
  end
  # æ‹¥æœ‰ Specta å’Œ Expecta çš„æ‹·è´
  # å¹¶ä¸”èƒ½å¤Ÿé€šè¿‡ ShowsApp è¿›è¡Œè®¿é—® ShowsKit, ç›¸å½“äº ShowsApp æ˜¯ ShowsTests çš„å®¿ä¸»APP
  target 'ShowsTests' do
    inherit! :search_paths
    pod 'Specta'
    pod 'Expecta'
  end
end
</code></pre>
<p><strong>abstract_target</strong>ï¼šå®šä¹‰ <code>abstract_target</code>ï¼Œæ–¹ä¾¿ target è¿›è¡Œä¾èµ–ç»§æ‰¿ï¼Œåœ¨ CocoaPods 1.0 ç‰ˆæœ¬ä¹‹å‰ä¸º <code>link_with</code>ã€‚</p>
<pre><code class="ruby">abstract_target 'Networking' do
  pod 'AlamoFire'

  target 'Networking App 1'
  target 'Networking App 2'
end
</code></pre>
<p><strong>abstract</strong>ï¼šè¡¨ç¤ºå½“å‰ target æ˜¯æŠ½è±¡çš„ï¼Œä¸ä¼šé“¾æ¥åˆ° Xcode çš„ target ä¸­ã€‚</p>
<p><strong>script_phase</strong>ï¼šæ·»åŠ è„šæœ¬é˜¶æ®µã€‚</p>
<p>åœ¨æ‰§è¡Œå®Œ <code>pod install</code> ä¹‹å CocoaPods ä¼šå°†è„šæœ¬æ·»åŠ åˆ°å¯¹åº”çš„ <code>target build phases</code>ã€‚</p>
<pre><code class="ruby">target 'App' do
    script_phase {
        :name =&gt; 'scriptName' # è„šæœ¬åç§°,
        :script =&gt; 'echo "nihao"' # è„šæœ¬å†…å®¹,
        :execution_position =&gt; :before_compile / :after_compile
        :shell_path =&gt; '/usr/bin/ruby' # è„šæœ¬è·¯å¾„
        :input_files =&gt; ['/input/filePath'], # è¾“å…¥æ–‡ä»¶
        :output_files =&gt; ['/outpput/filePath'] # è¾“å‡ºæ–‡ä»¶
    }
end
</code></pre>
<h3 id="Target-configuration"><a href="#Target-configuration" class="headerlink" title="Target configuration"></a>Target configuration</h3><p><strong>platform</strong>ï¼šæŒ‡å®šå…¶æ„å»ºå¹³å°ã€‚</p>
<p>é»˜è®¤å€¼ä¸º iOS 4.3ã€OSX 10.6ã€tvOS 9.0 å’Œ watchOS 2.0ã€‚CocoaPods 1.0 ä¹‹å‰çš„ç‰ˆæœ¬ä¸º xcodeproj</p>
<pre><code class="ruby">platform :ios, '4.0'
</code></pre>
<p><strong>project</strong>ï¼šæŒ‡å®šåŒ…å« target çš„ Xcode projectã€‚è¿™ä¸€èˆ¬åœ¨ workspace å­˜åœ¨å¤šä¸ª xcode project ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="ruby"># åœ¨ FastGPS Project ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåä¸º MyGPSApp çš„ target
target 'MyGPSApp' do
  project 'FastGPS'
  ...
end
</code></pre>
<p><strong>inhibit_all_warnings</strong>!ï¼šç¦æ­¢æ‰€æœ‰è­¦å‘Šã€‚</p>
<p>å¦‚æœé’ˆå¯¹å•ä¸ª Podï¼Œåˆ™å¯ä»¥é‡‡ç”¨ï¼š</p>
<pre><code class="ruby">pod 'SSZipArchive', :inhibit_warnings =&gt; true
pod 'SSZipArchive', :inhibit_warnings =&gt; true
</code></pre>
<p><strong>user_modular_headers</strong>!ï¼šå°†æ‰€æœ‰ Pod æ¨¡å—åŒ–ã€‚</p>
<p>å¦‚æœé’ˆå¯¹å•ä¸ª Podï¼Œåˆ™å¯ä»¥é‡‡ç”¨ï¼š</p>
<pre><code class="ruby">pod 'SSZipArchive', :modular_headers =&gt; true
pod 'SSZipArchive', :modular_headers =&gt; false
</code></pre>
<p><strong>user_frameworks</strong>!ï¼šé‡‡ç”¨ framework è€Œä¸æ˜¯ .a æ–‡ä»¶çš„é™æ€åº“ã€‚</p>
<p>å¯ä»¥é€šè¿‡ <code>:linkage</code> æŒ‡å®šä½¿ç”¨é™æ€åº“è¿˜æ˜¯åŠ¨æ€åº“ï¼š</p>
<pre><code class="ruby">use_frameworksï¼:linkage =&gt; :dynamic / :static
</code></pre>
<p><strong>supports_swift_versions</strong>ï¼šæŒ‡å®š target definition æ”¯æŒçš„ swift ç‰ˆæœ¬è¦æ±‚</p>
<pre><code class="ruby">supports_swift_versions '&gt;= 3.0', '&lt; 4.0'
</code></pre>
<h3 id="Workspace"><a href="#Workspace" class="headerlink" title="Workspace"></a>Workspace</h3><p><strong>workspace</strong>ï¼šæŒ‡å®šåŒ…å«æ‰€æœ‰é¡¹ç›®çš„ Xcode workspaceã€‚</p>
<pre><code class="ruby">workspace 'MyWorkspace'
</code></pre>
<h3 id="Sources"><a href="#Sources" class="headerlink" title="Sources"></a>Sources</h3><p><strong>sources</strong>ï¼šPodfile ä»æŒ‡å®šçš„æºåˆ—è¡¨ä¸­è¿›è¡Œæ£€ç´¢ã€‚sources é»˜è®¤å­˜å‚¨åœ¨ ~/.cocoapods/repos ä¸­ï¼Œæ˜¯å…¨å±€çš„è€ŒéæŒ‰ target definition å­˜å‚¨ã€‚å½“æœ‰å¤šä¸ªç›¸åŒçš„ Pod æ—¶ï¼Œä¼˜å…ˆé‡‡ç”¨æ£€ç´¢åˆ°çš„ Pod çš„ç¬¬ä¸€ä¸ªæºï¼Œå› æ­¤å½“æŒ‡å®šå¦ä¸€ä¸ªæ¥æºæ—¶ï¼Œåˆ™éœ€æ˜¾ç¤ºæŒ‡å®š CocoaPods çš„æºã€‚</p>
<pre><code class="ruby">source 'https://github.com/artsy/Specs.git'
source 'https://github.com/CocoaPods/Specs.git'
</code></pre>
<h3 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h3><p><strong>plugin</strong>ï¼šæŒ‡å®šåœ¨å®‰è£…æœŸé—´ä½¿ç”¨çš„æ’ä»¶ã€‚</p>
<pre><code class="ruby">plugin 'cocoapods-keys', :keyring =&gt; 'Eidolon'
plugin 'slather'
</code></pre>
<p><strong>pre_install</strong>ï¼šåœ¨ä¸‹è½½åå’Œåœ¨å®‰è£… Pod å‰è¿›è¡Œæ›´æ”¹ã€‚</p>
<pre><code class="ruby">pre_install do |installer|
  # Do something fancy!
end
</code></pre>
<p><strong>pre_integrate</strong>ï¼šåœ¨ project å†™å…¥ç£ç›˜å‰è¿›è¡Œæ›´æ”¹ã€‚</p>
<pre><code class="ruby">pre_integrate do |installer|
  # perform some changes on dependencies
end
</code></pre>
<p><strong>post_install</strong>ï¼šå¯¹ç”Ÿæˆ project å†™å…¥ç£ç›˜å‰è¿›è¡Œæœ€åçš„ä¿®æ”¹ã€‚</p>
<pre><code class="ruby">post_install do |installer|
  installer.pods_project.targets.each do |target|
    target.build_configurations.each do |config|
      config.build_settings['GCC_ENABLE_OBJC_GC'] = 'supported'
    end
  end
end
</code></pre>
<p><strong>post_integrate</strong>ï¼šåœ¨ project å†™å…¥ç£ç›˜åè¿›è¡Œæœ€åæ›´æ”¹ã€‚</p>
<pre><code class="ruby">post_integrate do |installer|
  # some change after project write to disk
end
</code></pre>
<h2 id="podspec-è¯­æ³•è§„èŒƒ"><a href="#podspec-è¯­æ³•è§„èŒƒ" class="headerlink" title="podspec è¯­æ³•è§„èŒƒ"></a>podspec è¯­æ³•è§„èŒƒ</h2><p>podspec = pod Specificationï¼Œæ„ä¸º pod è§„èŒƒï¼Œå®ƒæ˜¯ä¸€ä¸ª Ruby æ–‡ä»¶ã€‚åŒ…å«äº† Pod çš„åº“ç‰ˆæœ¬è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚åº”ä»ä½•å¤„è·å–æºã€ä½¿ç”¨å“ªäº›æ–‡ä»¶ã€è¦åº”ç”¨æ„å»ºè®¾ç½®ç­‰ä¿¡æ¯ï¼›ä¹Ÿå¯ä»¥çœ‹ä½œè¯¥æ–‡ä»¶æ˜¯æ•´ä¸ªä»“åº“çš„ç´¢å¼•æ–‡ä»¶ï¼Œäº†è§£å®ƒå¯¹æˆ‘ä»¬çŸ¥é“ Pod åº“æ˜¯å¦‚ä½•ç»„ç»‡ã€è¿ä½œçš„æä¾›äº†å¾ˆå¤§å¸®åŠ©ã€‚podspec çš„ DSL æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œæ–‡ä»¶å¯é€šè¿‡ <code>pod spec create</code> åˆ›å»ºã€‚</p>
<h3 id="Root"><a href="#Root" class="headerlink" title="Root"></a>Root</h3><table>
<thead>
<tr>
<th>åç§°</th>
<th>ç”¨é€”</th>
<th>å¿…éœ€</th>
</tr>
</thead>
<tbody><tr>
<td><code>name</code></td>
<td>pod åç§°</td>
<td>required</td>
</tr>
<tr>
<td><code>version</code></td>
<td>pod ç‰ˆæœ¬ï¼Œéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶</td>
<td>required</td>
</tr>
<tr>
<td><code>swift_version</code></td>
<td>æ”¯æŒçš„ Swift ç‰ˆæœ¬</td>
<td></td>
</tr>
<tr>
<td><code>cocoapods_version</code></td>
<td>æ”¯æŒçš„ CocoaPods ç‰ˆæœ¬</td>
<td></td>
</tr>
<tr>
<td><code>authors</code></td>
<td>pod ç»´æŠ¤è€…çš„å§“åå’Œç”µå­é‚®ä»¶ï¼Œç”¨â€œ, â€è¿›è¡Œåˆ†å‰²</td>
<td>required</td>
</tr>
<tr>
<td><code>license</code></td>
<td>pod çš„è®¸å¯è¯</td>
<td>required</td>
</tr>
<tr>
<td><code>homepage</code></td>
<td>pod ä¸»é¡µçš„ URL</td>
<td>required</td>
</tr>
<tr>
<td><code>source</code></td>
<td>æºåœ°å€ï¼Œå³æºæ–‡ä»¶çš„å­˜æ”¾åœ°å€ï¼Œæ”¯æŒå¤šç§å½¢å¼æº</td>
<td>required</td>
</tr>
<tr>
<td><code>summary</code></td>
<td>pod çš„ç®€çŸ­æè¿°</td>
<td>required</td>
</tr>
<tr>
<td><code>prepare_command</code></td>
<td>ä¸‹è½½ pod åæ‰§è¡Œçš„ bash è„šæœ¬</td>
<td></td>
</tr>
<tr>
<td><code>static_framework</code></td>
<td>æ˜¯å¦é‡‡ç”¨é™æ€ framework åˆ†å‘</td>
<td></td>
</tr>
<tr>
<td><code>deprecated</code></td>
<td>è¯¥åº“æ˜¯å¦å·²è¢«å¼ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>deprecated_in_favor_of</code></td>
<td>è¯¥åº“åç§°å·²è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹</td>
<td></td>
</tr>
</tbody></table>
<pre><code class="ruby">Pod::Spec.new do |s|
  s.name             = 'CustomPod'
  s.version          = '0.1.0'
  s.summary          = 'A short description of CustomPod.'
  s.swift_versions   = ['3.0', '4.0', '4.2']
  s.cocoapods_version  =  '&gt;= 0.36'
  s.author           = { 'nihao' =&gt; 'XXXX@qq.com' }
  s.license          = { :type =&gt; 'MIT', :file =&gt; 'LICENSE' }
  s.homepage         = 'https://github.com/XXX/CustomPod'
# Supported Key
# :git=&gt; :tag, :branch, :commit,:submodules
# :svn=&gt; :folder, :tag,:revision
# :hg=&gt;:revision
# :http=&gt; :flatten, :type, :sha256, :sha1,:headers
  s.source           = { :git =&gt; 'https://github.com/XX/CustomPod.git', :tag =&gt; s.version.to_s }
  s.prepare_command  =  'ruby build_files.rb'
  s.static_framework = true
  s.deprecated       = true
  s.deprecated_in_favor_of  =  'NewMoreAwesomePod'
end
</code></pre>
<h3 id="Platform"><a href="#Platform" class="headerlink" title="Platform"></a>Platform</h3><p><strong>platform</strong>ï¼špod æ”¯æŒçš„å¹³å°ï¼Œç•™ç©ºæ„å‘³ç€ pod æ”¯æŒæ‰€æœ‰å¹³å°ã€‚å½“æ”¯æŒå¤šå¹³å°æ—¶åº”è¯¥ç”¨ <code>deployment_target</code> ä»£æ›¿ã€‚</p>
<pre><code class="ruby">spec.platform = :osx, '10.8'
</code></pre>
<p><strong>deployment_target</strong>ï¼šå…è®¸æŒ‡å®šæ”¯æŒæ­¤ pod çš„å¤šä¸ªå¹³å°ï¼Œä¸ºæ¯ä¸ªå¹³å°æŒ‡å®šä¸åŒçš„éƒ¨ç½²ç›®æ ‡ã€‚</p>
<pre><code class="ruby">spec.ios.deployment_target = '6.0'
spec.osx.deployment_target = '10.8'
</code></pre>
<h3 id="Build-settings"><a href="#Build-settings" class="headerlink" title="Build settings"></a>Build settings</h3><p><strong>dependency</strong>ï¼šåŸºäºå…¶ä»– pods æˆ–å­è§„èŒƒçš„ä¾èµ–</p>
<pre><code class="ruby">spec.dependency 'AFNetworking', '~&gt; 1.0', :configurations =&gt; ['Debug']
</code></pre>
<p><strong>info_plist</strong>ï¼šåŠ å…¥åˆ°ç”Ÿæˆçš„ Info.plist çš„é”®å€¼å¯¹ï¼Œä¼šå¯¹ CocoaPods ç”Ÿæˆçš„é»˜è®¤å€¼è¿›è¡Œè¦†ç›–ã€‚ä»…å¯¹ä½¿ç”¨ framework çš„æ¡†æ¶æœ‰å½±å“ï¼Œå¯¹é™æ€åº“æ— æ•ˆã€‚å¯¹äºåº”ç”¨è§„èŒƒï¼Œè¿™äº›å€¼å°†åˆå¹¶åˆ°åº”ç”¨ç¨‹åºä¸»æœºçš„ <code>Info.plist</code>ï¼›å¯¹äºæµ‹è¯•è§„èŒƒï¼Œè¿™äº›å€¼å°†åˆå¹¶åˆ°æµ‹è¯•åŒ…çš„ Info.plistã€‚</p>
<pre><code class="ruby">spec.info_plist = {
  'CFBundleIdentifier' =&gt; 'com.myorg.MyLib',
  'MY_VAR' =&gt; 'SOME_VALUE'
}
</code></pre>
<p><strong>requires_arc</strong>ï¼šå…è®¸æŒ‡å®šå“ªäº› source_files é‡‡ç”¨ ARCï¼Œä¸ä½¿ç”¨ ARC çš„æ–‡ä»¶å°†å…·æœ‰ <code>-fno-objc-arc</code> ç¼–è¯‘å™¨æ ‡å¿—</p>
<pre><code class="ruby">spec.requires_arc = false
spec.requires_arc = 'Classes/Arc'
spec.requires_arc = ['Classes/*ARC.m', 'Classes/ARC.mm']
</code></pre>
<p><strong>frameworks</strong>ï¼šä½¿ç”¨è€… target éœ€è¦é“¾æ¥çš„ç³»ç»Ÿæ¡†æ¶åˆ—è¡¨</p>
<pre><code class="ruby">spec.ios.framework = 'CFNetwork'
spec.frameworks = 'QuartzCore', 'CoreData'
</code></pre>
<p><strong>weak_frameworks</strong>ï¼šä½¿ç”¨è€… target éœ€è¦å¼±é“¾æ¥çš„æ¡†æ¶åˆ—è¡¨</p>
<pre><code class="swift">spec.weak_framework = 'Twitter'
spec.weak_frameworks = 'Twitter', 'SafariServices'
</code></pre>
<p><strong>libraries</strong>ï¼šä½¿ç”¨è€… target éœ€è¦é“¾æ¥çš„ç³»ç»Ÿåº“åˆ—è¡¨</p>
<pre><code class="ruby">spec.ios.library = 'xml2'
spec.libraries = 'xml2', 'z'
</code></pre>
<p><strong>compiler_flags</strong>ï¼šåº”ä¼ é€’ç»™ç¼–è¯‘å™¨çš„ flags</p>
<pre><code class="ruby">spec.compiler_flags = '-DOS_OBJECT_USE_OBJC=0', '-Wno-format'
</code></pre>
<p><strong>pod_target_xcconfig</strong>ï¼šå°†æŒ‡å®š flag æ·»åŠ åˆ°æœ€ç»ˆ pod çš„ xcconfig æ–‡ä»¶</p>
<pre><code class="ruby">spec.pod_target_xcconfig = { 'OTHER_LDFLAGS' =&gt; '-lObjC' }
</code></pre>
<p><strong>user_target_xcconfig</strong>ï¼šğŸ™… å°†æŒ‡å®š flag æ·»åŠ åˆ°æœ€ç»ˆèšåˆçš„ target çš„ xcconfigï¼Œä¸æ¨èä½¿ç”¨æ­¤å±æ€§ï¼Œå› ä¸ºä¼šæ±¡æŸ“ç”¨æˆ·çš„æ„å»ºè®¾ç½®ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†²çªã€‚</p>
<pre><code class="ruby">spec.user_target_xcconfig = { 'MY_SUBSPEC' =&gt; 'YES' }
</code></pre>
<p><strong>prefix_header_contents</strong>ï¼šğŸ™… åœ¨ Pod ä¸­æ³¨å…¥çš„é¢„ç¼–è¯‘å†…å®¹ï¼Œä¸æ¨èä½¿ç”¨æ­¤å±æ€§ï¼Œå› ä¸ºå…¶ä¼šæ±¡æŸ“ç”¨æˆ·æˆ–è€…å…¶ä»–åº“çš„é¢„ç¼–è¯‘å¤´ã€‚</p>
<pre><code class="ruby">spec.prefix_header_contents = '#import &lt;UIKit/UIKit.h&gt;', '#import &lt;Foundation/Foundation.h&gt;'
</code></pre>
<p><strong>prefix_header_file</strong>ï¼šé¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼Œfalse è¡¨ç¤ºä¸ç”Ÿæˆé»˜è®¤çš„ CocoaPods çš„ä¸ç¼–è¯‘å¤´æ–‡ä»¶ã€‚ğŸ™… ä¸æ¨èä½¿ç”¨è·¯å¾„å½¢å¼ï¼Œå› ä¸ºå…¶ä¼šæ±¡æŸ“ç”¨æˆ·æˆ–è€…å…¶ä»–åº“çš„é¢„ç¼–è¯‘å¤´ã€‚</p>
<pre><code class="ruby">spec.prefix_header_file = 'iphone/include/prefix.pch'
spec.prefix_header_file = false
</code></pre>
<p><strong>module_name</strong>ï¼šç”Ÿæˆçš„ framrwork / clang module ä½¿ç”¨çš„åç§°ï¼Œè€Œéé»˜è®¤åç§°ã€‚</p>
<pre><code class="ruby">spec.module_name = 'Three20'
</code></pre>
<p><strong>header_dir</strong>ï¼šå­˜å‚¨å¤´æ–‡ä»¶çš„ç›®å½•ï¼Œè¿™æ ·å®ƒä»¬å°±ä¸ä¼šè¢«ç ´åã€‚</p>
<pre><code class="ruby">spec.header_dir = 'Three20Core'
</code></pre>
<p><strong>header_mappings_dir</strong>ï¼šç”¨äºä¿ç•™å¤´æ–‡ä»¶æ–‡ä»¶å¤¹çš„ç›®å½•ã€‚å¦‚æœªæä¾›ï¼Œå¤´æ–‡ä»¶å°†è¢«ç¢¾å¹³ã€‚</p>
<pre><code class="ruby">spec.header_mappings_dir = 'src/include'
</code></pre>
<p><strong>script_phases</strong>ï¼šè¯¥å±æ€§å…è®¸å®šä¹‰è„šæœ¬åœ¨ pod ç¼–è¯‘æ—¶æ‰§è¡Œï¼Œå…¶ä½œä¸º <code>xcode build</code> å‘½ä»¤çš„ä¸€éƒ¨åˆ†æ‰§è¡Œï¼Œè¿˜å¯ä»¥åˆ©ç”¨ç¼–è¯‘æœŸé—´æ‰€è®¾ç½®çš„ç¯å¢ƒå˜é‡ã€‚</p>
<pre><code class="ruby">spec.script_phases = [
    { :name =&gt; 'Hello World', :script =&gt; 'echo "Hello World"' },
    { :name =&gt; 'Hello Ruby World', :script =&gt; 'puts "Hello World"', :shell_path =&gt; '/usr/bin/ruby' },
  ]
</code></pre>
<h3 id="File-patterns"><a href="#File-patterns" class="headerlink" title="File patterns"></a>File patterns</h3><p>æ–‡ä»¶æ¨¡å¼æŒ‡å®šäº†åº“çš„æ‰€æœ‰æ–‡ä»¶ç®¡ç†æ–¹å¼ï¼Œå¦‚æºä»£ç ã€å¤´æ–‡ä»¶ã€frameworkã€libariesã€ä»¥åŠå„ç§èµ„æºã€‚å…¶æ–‡ä»¶æ¨¡å¼é€šé…ç¬¦å½¢å¼å¯å‚è€ƒ <a target="_blank" rel="noopener" href="https://guides.cocoapods.org/syntax/podspec.html#group_file_patterns">LINK</a>ã€‚</p>
<p><strong>source_files</strong>ï¼šæŒ‡å®šæºæ–‡ä»¶</p>
<pre><code class="ruby">spec.source_files = 'Classes/**/*.{h,m}', 'More_Classes/**/*.{h,m}'
</code></pre>
<p><strong>public_header_files</strong>ï¼šæŒ‡å®šå…¬å…±å¤´æ–‡ä»¶ï¼Œè¿™äº›å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶åŒ¹é…ï¼Œå¹¶ç”Ÿæˆæ–‡æ¡£å‘ç”¨æˆ·æä¾›ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™å°† source_files ä¸­çš„æ‰€æœ‰å¤´æ–‡ä»¶éƒ½åŒ…å«ç”Ÿæˆã€‚</p>
<pre><code class="ruby">spec.public_header_files = 'Headers/Public/*.h'
</code></pre>
<p><strong>project_header_files</strong>ï¼šæŒ‡å®šé¡¹ç›®å¤´æ–‡ä»¶ï¼Œä¸å…¬å…±å¤´æ–‡ä»¶ç›¸å¯¹åº”ï¼Œä»¥æ’é™¤ä¸åº”å‘ç”¨æˆ·é¡¹ç›®å…¬å¼€ä¸”ä¸åº”ç”¨äºç”Ÿæˆæ–‡æ¡£çš„æ ‡å¤´ï¼Œä¸”ä¸ä¼šå‡ºç°åœ¨æ„å»ºç›®å½•ä¸­ã€‚</p>
<pre><code class="ruby">spec.project_header_files = 'Headers/Project/*.h'
</code></pre>
<p><strong>private_header_files</strong>ï¼šç§æœ‰å¤´æ–‡ä»¶ï¼Œä¸å…¬å…±å¤´æ–‡ä»¶å¯¹åº”ï¼Œä»¥æ’é™¤ä¸åº”å‘ç”¨æˆ·é¡¹ç›®å…¬å¼€ä¸”ä¸åº”ç”¨äºç”Ÿæˆæ–‡æ¡£çš„æ ‡å¤´ï¼Œè¿™äº›å¤´æ–‡ä»¶ä¼šå‡ºç°åœ¨äº§ç‰©ä¸­çš„ PrivateHeader æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<pre><code class="ruby">spec.private_header_files = 'Headers/Private/*.h'
</code></pre>
<p><strong>vendered_frameworks</strong>ï¼špod é™„åŠ çš„ framework è·¯å¾„</p>
<pre><code class="ruby">spec.ios.vendored_frameworks = 'Frameworks/MyFramework.framework'
spec.vendored_frameworks = 'MyFramework.framework', 'TheirFramework.xcframework'    
</code></pre>
<p><strong>vendered_libraries</strong>ï¼špod é™„åŠ çš„ libraries è·¯å¾„</p>
<pre><code class="ruby">spec.ios.vendored_library = 'Libraries/libProj4.a'
spec.vendored_libraries = 'libProj4.a', 'libJavaScriptCore.a'
</code></pre>
<p><strong>on_demand_resources</strong>ï¼šæ ¹æ® <a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2015/214/">Introducing On demand Resources</a> æŒ‰éœ€åŠ è½½èµ„æºï¼Œä¸æ¨èä¸ä¸»å·¥ç¨‹å…±äº«æ ‡ç­¾ï¼Œé»˜è®¤ç±»åˆ«ä¸º <code>category =&gt; :download_on_demand</code></p>
<pre><code class="ruby">s.on_demand_resources = {
  'Tag1' =&gt; { :paths =&gt; ['file1.png', 'file2.png'], :category =&gt; :download_on_demand }
}
s.on_demand_resources = {
  'Tag1' =&gt; { :paths =&gt; ['file1.png', 'file2.png'], :category =&gt; :initial_install }
}
</code></pre>
<p><strong>resources</strong>ï¼šä¸º pod æ„å»ºçš„ bundle çš„åç§°å’Œèµ„æºæ–‡ä»¶ï¼Œå…¶ä¸­ key ä¸º bundle åç§°ï¼Œå€¼ä»£è¡¨å®ƒä»¬åº”ç”¨çš„æ–‡ä»¶æ¨¡å¼ã€‚</p>
<pre><code class="ruby">spec.resource_bundles = {
    'MapBox' =&gt; ['MapView/Map/Resources/*.png'],
    'MapBoxOtherResources' =&gt; ['MapView/Map/OtherResources/*.png']
}
</code></pre>
<p><strong>exclude_files</strong>ï¼šæ’é™¤çš„æ–‡ä»¶æ¨¡å¼åˆ—è¡¨</p>
<pre><code class="ruby">spec.ios.exclude_files = 'Classes/osx'
spec.exclude_files = 'Classes/**/unused.{h,m}'
</code></pre>
<p><strong>preserve_paths</strong>ï¼šä¸‹è½½åä¸åº”åˆ é™¤çš„æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCocoaPods ä¼šåˆ é™¤ä¸å…¶ä»–æ–‡ä»¶æ¨¡å¼ä¸åŒ¹é…çš„æ‰€æœ‰æ–‡ä»¶</p>
<pre><code class="ruby">spec.preserve_path = 'IMPORTANT.txt'
spec.preserve_paths = 'Frameworks/*.framework'
</code></pre>
<p><strong>module_map</strong>ï¼špod ç»§æ‰¿ä¸º framework æ—¶ä½¿ç”¨çš„æ¨¡å—æ˜ å°„æ–‡ä»¶ï¼Œé»˜è®¤ä¸º trueï¼ŒCocoaPods æ ¹æ® å…¬å…±å¤´æ–‡ä»¶åˆ›å»º module_map æ–‡ä»¶ã€‚</p>
<pre><code class="ruby">spec.module_map = 'source/module.modulemap'
spec.module_map = false
</code></pre>
<h3 id="Subspecs"><a href="#Subspecs" class="headerlink" title="Subspecs"></a>Subspecs</h3><p><strong>subspec</strong>ï¼šå­æ¨¡å—çš„è§„èŒƒï¼›å®è¡ŒåŒé‡ç»§æ‰¿ï¼šspecs è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰ subspec ä½œä¸ºä¾èµ–é¡¹(é™¤éæŒ‡å®šé»˜è®¤ spec)ï¼›subspec ç»§æ‰¿äº†çˆ¶çº§çš„å±æ€§ï¼›</p>
<pre><code class="ruby"># é‡‡ç”¨ä¸åŒæºæ–‡ä»¶çš„ Specs, CocoaPods è‡ªåŠ¨å¤„ç†é‡å¤å¼•ç”¨é—®é¢˜
subspec 'Twitter' do |sp|
  sp.source_files = 'Classes/Twitter'
end

subspec 'Pinboard' do |sp|
  sp.source_files = 'Classes/Pinboard'
end

# å¼•ç”¨å…¶ä»–å­è§„èŒƒ
s.subspec "Core" do |ss|
    ss.source_files  = "Sources/Moya/", "Sources/Moya/Plugins/"
    ss.dependency "Alamofire", "~&gt; 5.0"
    ss.framework  = "Foundation"
  end

  s.subspec "ReactiveSwift" do |ss|
    ss.source_files = "Sources/ReactiveMoya/"
    ss.dependency "Moya/Core"
    ss.dependency "ReactiveSwift", "~&gt; 6.0"
  end

  s.subspec "RxSwift" do |ss|
    ss.source_files = "Sources/RxMoya/"
    ss.dependency "Moya/Core"
    ss.dependency "RxSwift", "~&gt; 5.0"
  end
end

# åµŒå¥—å­è§„èŒƒ
Pod::Spec.new do |s|
  s.name = 'Root'

  s.subspec 'Level_1' do |sp|
    sp.subspec 'Level_2' do |ssp|
    end
  end
end
</code></pre>
<p><strong>default_subspecs</strong>ï¼šé»˜è®¤å­è§„èŒƒæ•°ç»„åç§°ï¼Œä¸æŒ‡å®šå°†å…¨éƒ¨å­è§„èŒƒä½œä¸ºé»˜è®¤å­è§„èŒƒï¼Œ<code>:none</code> è¡¨ç¤ºä¸éœ€è¦ä»»ä½•å­è§„èŒƒã€‚</p>
<pre><code class="ruby">spec.default_subspec = 'Core'
spec.default_subspecs = 'Core', 'UI'
spec.default_subspecs = :none    
</code></pre>
<p><strong>scheme</strong>ï¼šç”¨ä»¥ç»™æŒ‡å®š scheme configuration æ·»åŠ æ‹“å±•</p>
<pre><code class="ruby">spec.scheme = { :launch_arguments =&gt; ['Arg1'] }
spec.scheme = { :launch_arguments =&gt; ['Arg1', 'Arg2'], :environment_variables =&gt; { 'Key1' =&gt; 'Val1'} }
</code></pre>
<p><strong>test_spec</strong>ï¼šæµ‹è¯•è§„èŒƒï¼Œåœ¨ 1.8 ç‰ˆæœ¬æ”¯æŒã€‚å¯å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.cocoapods.org/CocoaPods-1.8.0-beta/">CocoaPods 1.8 Beta</a></p>
<p><strong>requires_app_host</strong>ï¼šæ˜¯å¦éœ€è¦å®¿ä¸» APP è¿è¡Œæµ‹è¯•ï¼Œä»…é€‚ç”¨äºæµ‹è¯•è§„èŒƒã€‚</p>
<p><strong>app_host_name</strong>ï¼šå¿…è¦æ—¶ä½œç”¨äºåº”ç”¨ç¨‹åºçš„åº”ç”¨ç¨‹åºè§„èŒƒåç§°</p>
<p><strong>app_spec</strong>ï¼šå®¿ä¸» APP è§„èŒƒ</p>
<pre><code class="ruby">Pod::Spec.new do |s|
  s.name         = 'CannonPodder'
  s.version      = '1.0.0'

  # ...rest of attributes here

  s.app_spec 'DemoApp' do |app_spec|
    app_spec.source_files = 'DemoApp/**/*.swift'
    # Dependency used only by this app spec.
    app_spec.dependency 'Alamofire'
  end

  s.test_spec 'Tests' do |test_spec|
    test_spec.requires_app_host = true
    # Use 'DemoApp' as the app host.
    test_spec.app_host_name = 'CannonPodder/DemoApp'

    # ...rest of attributes here

    # This is required since 'DemoApp' is specified as the app host.
    test_spec.dependency 'CannonPodder/DemoApp'
  end
end
</code></pre>
<h3 id="Multi-Platform-support"><a href="#Multi-Platform-support" class="headerlink" title="Multi-Platform support"></a>Multi-Platform support</h3><p>å­˜å‚¨ç‰¹å®šäºæŸä¸€ä¸ªå¹³å°çš„å€¼ï¼Œåˆ†åˆ«ä¸º iosã€osxã€macOSã€tvosã€watchosï¼š</p>
<pre><code class="ruby">spec.resources = 'Resources/**/*.png'
spec.ios.resources = 'Resources_ios/**/*.png'
</code></pre>
<h2 id="Pod-çš„å¼€å‘æµç¨‹"><a href="#Pod-çš„å¼€å‘æµç¨‹" class="headerlink" title="Pod çš„å¼€å‘æµç¨‹"></a>Pod çš„å¼€å‘æµç¨‹</h2><p>äº†è§£å®Œ Podfile å’Œ podspec çš„ç›¸å…³çš„è§„èŒƒä¹‹åï¼Œé‚£ä¹ˆå¼€å‘è‡ªå·±çš„ pod åº”è¯¥æ˜¯ä¸€ä»¶é©¾è½»å°±ç†Ÿçš„äº‹ã€‚</p>
<h3 id="Spec-Repo"><a href="#Spec-Repo" class="headerlink" title="Spec Repo"></a>Spec Repo</h3><p>Spec Repo æ˜¯ podspec çš„ä»“åº“ï¼Œå³æ˜¯å­˜å‚¨ç›¸å…³çš„ podspec æ–‡ä»¶çš„åœ°æ–¹ã€‚æœ¬åœ°æºå­˜å‚¨äº ~/.cocoapods/reposä¸­ï¼Œå®ƒä» git ä¸Šæ‹‰å–å¹¶å®Œå…¨ä¿ç•™ç›®å½•ç»“æ„ã€‚å¯ä»¥å‘ç°ï¼Œ Master Specs Repo çš„ç°åœ¨ç›®å½•ç»“æ„æœ‰äº›ç‰¹æ®Šï¼›ä»¥å¾€ç‰ˆæœ¬çš„ Master Spec Repo æ˜¯å®Œå…¨åœ¨åŒä¸€ç›®å½•ä¸‹çš„ï¼Œä½†è‹¥å¤§é‡æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ä¸­ä¼šå¯¼è‡´äº† <a target="_blank" rel="noopener" href="https://github.com/CocoaPods/CocoaPods/issues/4989#issuecomment-193772935">Github ä¸‹è½½æ…¢</a> çš„é—®é¢˜ã€‚ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‡‡ç”¨æ•£åˆ—è¡¨å½¢å¼å¤„ç†ã€‚å…·ä½“æ–¹å¼ä¸ºå¯¹åç§°è¿›è¡Œ MD5 è®¡ç®—å¾—åˆ°æ•£åˆ—å€¼ï¼Œå–å‰ä¸‰ä½ä½œä¸ºç›®å½•å‰ç¼€ï¼Œä»¥å¯¹æ–‡ä»¶åˆ†æ•£åŒ–ã€‚åˆæ¬¡ä¹‹å¤–ï¼ŒCocoaPods åç»­è¿˜é‡‡ç”¨ CDN ä»¥åŠ trunk è¿›ä¸€æ­¥åŠ å¿«ä¸‹è½½é€Ÿåº¦ï¼Œæœ‰å…´è¶£å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="http://chuquan.me/2022/01/07/source-analyze-principle/">CocoaPods Source ç®¡ç†æœºåˆ¶</a>ã€‚</p>
<p>å¦‚ï¼š<code>md5("CJFoundation") =&gt; 044d913fdd5a52b303222c357521f744</code>ï¼›<code>CJFoundation</code> åˆ™åœ¨ /Specs/0/4/4 ç›®å½•ä¸­</p>
<p><img src="https://raw.githubusercontent.com/xuhaodong1/resource/master/image-20221215171557476.png" alt="image-20221215171557476"></p>
<h3 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h3><p>åªéœ€åˆ©ç”¨  <code>pod lib create [PodName]</code> å‘½ä»¤ä¾¿å¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ pod ã€‚å¡«å†™å¥½ä½¿ç”¨å¹³å°ã€ä½¿ç”¨è¯­è¨€ã€æ˜¯å¦åŒ…å« Demoã€æµ‹è¯•æ¡†æ¶ç­‰ä¿¡æ¯ï¼ŒCocoaPods ä¼šä»é»˜è®¤çš„ Git åœ°å€ä¸­æ‹‰å–ä¸€ä»½ pod æ¨¡ç‰ˆï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ <code>--template-url=URL</code> æŒ‡å®šæ¨¡ç‰ˆåœ°å€ã€‚åœ¨æ‰§è¡Œå®Œåï¼Œæ•´ä¸ªæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="swift">tree CustomPod -L 2

CustomPod
â”œâ”€â”€ CustomPod
â”‚   â”œâ”€â”€ Assets // å­˜æ”¾èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ Classes
â”‚       â””â”€â”€ RemoveMe.[swift/m] // å•ä¸€æ–‡ä»¶ä»¥ç¡®ä¿æœ€åˆç¼–è¯‘å·¥ä½œ
â”œâ”€â”€ CustomPod.podspec // Pod çš„ spec æ–‡ä»¶, æ˜¯ä¸€ä¸ª Pod ä¾èµ–çš„ç´¢å¼•ä»¥åŠè§„èŒƒä¿¡æ¯
â”œâ”€â”€ Example // ç”¨ä½œæ¼”ç¤º/æµ‹è¯•çš„ç¤ºä¾‹é¡¹ç›®
â”‚   â”œâ”€â”€ CustomPod
â”‚   â”œâ”€â”€ CustomPod.xcodeproj
â”‚   â”œâ”€â”€ CustomPod.xcworkspace
â”‚   â”œâ”€â”€ Podfile
â”‚   â”œâ”€â”€ Podfile.lock
â”‚   â”œâ”€â”€ Pods
â”‚   â””â”€â”€ Tests
â”œâ”€â”€ _Pods.xcodeproj -&gt; Example/Pods/Pods.xcodeproj // æŒ‡å‘ Pods é¡¹ç›®çš„ä»¥è·å¾— Carthage æ”¯æŒ
â”œâ”€â”€ LICENSE // è®¸å¯è¯
â””â”€â”€ README.md  // è‡ªè¿°æ–‡ä»¶
</code></pre>
<h3 id="Development"><a href="#Development" class="headerlink" title="Development"></a>Development</h3><p>å°†æºæ–‡ä»¶å’Œèµ„æºåˆ†åˆ«æ”¾å…¥ Classes / Assets æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ–è€…æŒ‰ä½ å–œæ¬¢çš„æ–¹å¼ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶åœ¨ podspec æ–‡ä»¶ä¸­ç¼–è¾‘ç›¸åº”é¡¹ã€‚å¦‚æœä½ æœ‰ä»»ä½•æƒ³ä½¿ç”¨çš„é…ç½®é¡¹ï¼Œå¯å‚è€ƒå‰é¢çš„podsepc è¯­æ³•è§„èŒƒ ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¼€å‘ Pod ä¸€èˆ¬éƒ½æ˜¯ä½œä¸ºæœ¬åœ° Pod è¢«å…¶ä»– Project æ‰€ä¾èµ–è¿›è¡Œå¼€å‘ï¼Œæ— è®ºæ˜¯ä½¿ç”¨ example æ–‡ä»¶å¤¹çš„ project æˆ–è€…å…¶ä»–çš„ Projectã€‚</p>
<p><code>pod 'Name', :path =&gt; '~/CustomPod/'</code></p>
<h3 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h3><p>é€šè¿‡ <code>pod lib lint</code> ä»¥éªŒè¯ Pod ä»“åº“çš„ä½¿ç”¨æ˜¯å¦æ­£å¸¸ã€‚</p>
<h3 id="Release"><a href="#Release" class="headerlink" title="Release"></a>Release</h3><p>å‰é¢æåˆ°è¿‡ podspec å¯ä»¥çœ‹ä½œæ˜¯æ•´ä¸ªä»“åº“çš„ç´¢å¼•æ–‡ä»¶ï¼Œæœ‰äº†è¿™ä¸ªæ–‡ä»¶ä¹Ÿå°±èƒ½ç»„ç»‡èµ·ä¸€ä¸ª Podã€‚å› æ­¤å®˜æ–¹çš„æºä»¥åŠç§æœ‰æºéƒ½åªéœ€è¦ podspec å³å¯ï¼Œè€Œå…¶ä»–æ–‡ä»¶åˆ™åº”æ¨é€åˆ° podspec ä¸­ source ä¸­æŒ‡å®šä»“åº“ï¼Œè¿™ä¸ªä»“åº“åº”è¯¥æ˜¯ä½ è‡ªåˆ›å»ºçš„ã€‚</p>
<p>åœ¨å‡†å¤‡å‘å¸ƒæ¨é€æºä»£ç æ—¶ï¼Œéœ€è¦æ›´æ–°ç‰ˆæœ¬å·ä»¥åŠåœ¨ git ä¸Šæ‰“ä¸Š tagï¼Œè¿™æ˜¯ä¸ºäº†è¿›è¡Œç‰ˆæœ¬å·åŒ¹é…ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹çš„ podspec æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="ruby">s.source = { :git =&gt; 'https://github.com/XXX/CustomPod.git', :tag =&gt; s.version.to_s }
</code></pre>
<p>å¯èƒ½ä½ çš„å·¥ä½œæµæ“ä½œå¦‚ä¸‹ï¼š</p>
<pre><code class="shell">$ cd ~/code/Pods/NAME
$ edit NAME.podspec
# set the new version to 0.0.1
# set the new tag to 0.0.1
$ pod lib lint
$ git add -A &amp;&amp; git commit -m "Release 0.0.1."
$ git tag '0.0.1'
$ git push --tags
</code></pre>
<p>å­˜æœ‰å‡ ç§æ–¹å¼æ¨é€ podspec æ–‡ä»¶ï¼š</p>
<ol>
<li>æ¨é€åˆ°<a target="_blank" rel="noopener" href="https://github.com/CocoaPods/Specs.git">å…¬å…±ä»“åº“</a>ï¼Œéœ€è¦ç”¨åˆ°çš„ trunk å­å‘½ä»¤ï¼Œæ›´å¤šå¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://guides.cocoapods.org/making/getting-setup-with-trunk">Getting setup with Trunk</a>ï¼š</li>
</ol>
<pre><code class="shell"># é€šè¿‡ç”µå­é‚®ç®±è¿›è¡Œæ³¨å†Œ
pod trunk register orta@cocoapods.org 'Orta Therox' --description='macbook air' 
# å°†æŒ‡å®špodspecæ–‡ä»¶æ¨é€åˆ°å…¬å…±ä»“åº“ä¸­
pod trunk push [NAME.podspec] 
# æ·»åŠ å…¶ä»–äººä½œä¸ºåä½œè€…
pod trunk add-owner ARAnalytics kyle@cocoapods.org 
</code></pre>
<ol start="2">
<li>æ¨é€åˆ°ç§æœ‰æºï¼Œä¾‹å¦‚ <a target="_blank" rel="noopener" href="https://github.com/artsy/Specs">Artsy/Specs</a>ï¼Œéœ€è¦ç”¨åˆ° repo å­å‘½ä»¤ï¼Œæ›´å¤šå¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://guides.cocoapods.org/making/private-cocoapods">Private Pods</a>ï¼š</li>
</ol>
<pre><code class="shell"># å°†ç§æœ‰æºåœ°å€æ·»åŠ åˆ°æœ¬åœ°
pod repo add REPO_NAME SOURCE_URL 
# æ£€æŸ¥ç§æœ‰æºæ˜¯å¦å®‰è£…æˆåŠŸå¹¶å‡†å¤‡å°±ç»ª
cd ~/.cocoapods/repos/REPO_NAME
pod repo lint .
# å°†Podçš„podspecæ·»åŠ åˆ°æŒ‡å®šREPO_NAMEä¸­
pod repo push REPO_NAME SPEC_NAME.podspec
</code></pre>
<ol start="3">
<li>ä¸æ¨é€åˆ°ä»»ä½•æºä¸­ï¼Œè‹¥èƒ½å­˜åœ¨ä»¥ URL æ–¹å¼æ£€ç´¢åˆ° podspecæ–‡ä»¶ï¼Œåˆ™å¯ç”¨è¯¥ URLï¼Œä¸€èˆ¬é‡‡ç”¨ä»“åº“åœ°å€ï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<pre><code class="ruby">pod 'AFNetworking', :git =&gt; 'https://github.com/XXX/CustomPod.git'
</code></pre>
<h3 id="Semantic-Versioning"><a href="#Semantic-Versioning" class="headerlink" title="Semantic Versioning"></a>Semantic Versioning</h3><p>è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶é¡¾åæ€ä¹‰æ˜¯ä¸€ç§è¯­ä¹‰ä¸Šçš„ç‰ˆæœ¬æ§åˆ¶ï¼Œå®ƒä¸è¦æ±‚å¼ºåˆ¶éµå¾ªï¼Œåªæ˜¯å¸Œæœ›å¼€å‘è€…èƒ½å¤Ÿå°½é‡éµå®ˆã€‚å¦‚æœåº“ä¹‹é—´ä¾èµ–å…³ç³»è¿‡é«˜ï¼Œå¯èƒ½é¢ä¸´ç‰ˆæœ¬æ§åˆ¶è¢«é”æ­»çš„é£é™©ï¼ˆå¯èƒ½éœ€è¦å¯¹æ¯ä¸€ä¸ªä¾èµ–åº“æ”¹ç‰ˆæ‰èƒ½å®ŒæˆæŸæ¬¡å‡çº§ï¼‰ï¼›å¦‚æœåº“ä¹‹é—´ä¾èµ–å…³ç³»è¿‡äºæ¾æ•£ï¼Œåˆå°†æ— æ³•é¿å…ç‰ˆæœ¬çš„æ··ä¹±ï¼ˆå¯èƒ½åº“å…¼å®¹æ€§ä¸å†èƒ½æ”¯æŒä»¥å¾€ç‰ˆæœ¬ï¼‰ï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶æ­£æ˜¯ä½œä¸ºè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚æ— è®ºåœ¨ CocoaPods ä¸­ï¼Œè¿˜æ˜¯ Swift Packager Manager ä¸Šï¼Œå®˜æ–¹éƒ½å¸Œæœ›åº“å¼€å‘è€…çš„çš„ç‰ˆæœ¬å·èƒ½éµå¾ªè¿™ä¸€åŸåˆ™ï¼š</p>
<p>ä¾‹å¦‚ï¼Œç»™å®šç‰ˆæœ¬å· <code>MAJOR.MINOR.PATCH</code>ï¼š</p>
<ol>
<li><code>MAJOR</code>ï¼šè¿›è¡Œä¸å…¼å®¹çš„ API æ›´æ”¹æ—¶è¿›è¡Œä¿®æ”¹</li>
<li><code>MINOR</code>ï¼šå‘åå…¼å®¹çš„æ–¹å¼æ·»åŠ æ–°åŠŸèƒ½æ—¶è¿›è¡Œä¿®æ”¹</li>
<li><code>PATCH</code>ï¼šè¿›è¡Œå‘åå…¼å®¹çš„é”™è¯¯ä¿®å¤æ—¶è¿›è¡Œä¿®æ”¹</li>
</ol>
<p>å…ˆè¡Œç‰ˆæœ¬å·ä»¥åŠç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯å¯ä»¥æ·»åŠ åˆ° <code>MAJOR.MINOR.PATCH</code> åé¢ä»¥ä½œä¸ºå»¶ä¼¸ã€‚</p>
<h2 id="CocoaPods-åŸç†æµ…æ"><a href="#CocoaPods-åŸç†æµ…æ" class="headerlink" title="CocoaPods åŸç†æµ…æ"></a>CocoaPods åŸç†æµ…æ</h2><h3 id="CococaPods-æ ¸å¿ƒç»„ä»¶"><a href="#CococaPods-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="CococaPods æ ¸å¿ƒç»„ä»¶"></a>CococaPods æ ¸å¿ƒç»„ä»¶</h3><p>CocoaPods è¢« Ruby ç®¡ç†ï¼Œå…¶æ ¸å¿ƒéƒ¨åˆ†ä¹Ÿè¢«åˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªç»„ä»¶ã€‚ä¸‹è½½æºç ï¼Œå¯ä»¥çœ‹åˆ° Gemfile æ–‡ä»¶å¦‚ä¸‹ï¼Œå…¶ä¾èµ–äº†è‹¥å¹²ä¸ª gemï¼Œæœ‰æ„æ€çš„æ˜¯ <code>cp_gem</code> å‡½æ•°ï¼Œé€šè¿‡ <code>SKIP_UNRELEASED_VERSIONS</code> ä¸ <code>path</code> æ¥æ§åˆ¶æ˜¯å¦é‡‡ç”¨æœ¬åœ°çš„ gem è·¯å¾„ï¼Œå®ç°äº† DEVELOPMENT ä¸ RELEASE ç¯å¢ƒçš„åˆ‡æ¢ã€‚</p>
<pre><code class="ruby">SKIP_UNRELEASED_VERSIONS = false

# Declares a dependency to the git repo of CocoaPods gem. This declaration is
# compatible with the local git repos feature of Bundler.
def cp_gem(name, repo_name, branch = 'master', path: false)
  return gem name if SKIP_UNRELEASED_VERSIONS
  opts = if path
           { :path =&gt; "../#{repo_name}" }
         else
           url = "https://github.com/CocoaPods/#{repo_name}.git"
           { :git =&gt; url, :branch =&gt; branch }
         end
  gem name, opts
end

source 'https://rubygems.org'

gemspec

group :development do
  cp_gem 'claide',                'CLAide'
  cp_gem 'cocoapods-core',        'Core'
  cp_gem 'cocoapods-deintegrate', 'cocoapods-deintegrate'
  cp_gem 'cocoapods-downloader',  'cocoapods-downloader'
  cp_gem 'cocoapods-plugins',     'cocoapods-plugins'
  cp_gem 'cocoapods-search',      'cocoapods-search'
  cp_gem 'cocoapods-trunk',       'cocoapods-trunk'
  cp_gem 'cocoapods-try',         'cocoapods-try'
  cp_gem 'molinillo',             'Molinillo'
  cp_gem 'nanaimo',               'Nanaimo'
  cp_gem 'xcodeproj',             'Xcodeproj'

  gem 'cocoapods-dependencies', '~&gt; 1.0.beta.1'
  ...
end
</code></pre>
<p>è¿™äº›ç»„ä»¶ç›¸å¯¹ç‹¬ç«‹ï¼Œè¢«åˆ†æˆä¸€ä¸ªä¸€ä¸ª Gem åŒ…ï¼Œåœ¨ <a target="_blank" rel="noopener" href="https://guides.cocoapods.org/contributing/components.html">Core Components</a> ä¸­ï¼Œå¯ä»¥æ‰¾åˆ°å¯¹è¿™äº›ç»„ä»¶çš„ç®€è¦æè¿°ã€‚åŒæ—¶ä¹Ÿå¯ä»¥åˆ° CocoaPods çš„ Github ä¸­å»çœ‹è¯¦ç»†æ–‡æ¡£ã€‚</p>
<img src="https://raw.githubusercontent.com/xuhaodong1/resource/master/image-20221216104815073.png" style="zoom:40%;">

<ul>
<li><strong>CocoaPods</strong>ï¼šå‘½ä»¤è¡Œæ”¯æŒä¸å®‰è£…ç¨‹åºï¼Œä¹Ÿä¼šå¤„ç† CocoaPods çš„æ‰€æœ‰ç”¨æˆ·äº¤äº’ã€‚</li>
<li><strong>cocoapods-core</strong>ï¼šå¯¹æ¨¡ç‰ˆæ–‡ä»¶çš„è§£æï¼Œå¦‚ Podfileã€.podspec ç­‰æ–‡ä»¶ã€‚</li>
<li><strong>CLAide</strong>ï¼šä¸€ä¸ªç®€å•çš„å‘½ä»¤è§£æå™¨ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå¿«é€Ÿåˆ›å»ºåŠŸèƒ½é½å…¨çš„å‘½ä»¤è¡Œç•Œé¢çš„ APIã€‚</li>
<li><strong>cocoapods-downloader</strong>ï¼šç”¨äºä¸‹è½½æºç ï¼Œä¸ºå„ç§ç±»å‹çš„æºä»£ç æ§åˆ¶å™¨(HTTP/SVN/Git/Mercurial) æä¾›ä¸‹è½½å™¨ã€‚å®ƒæä¾› tagsã€commitesã€revisionsã€branches ä»¥åŠ zips æ–‡ä»¶çš„ä¸‹è½½ä¸è§£å‹ç¼©æ“ä½œã€‚</li>
<li><strong>Monlinilloï¼šCocoaPods</strong>ï¼šå¯¹äºä¾èµ–ä»²è£ç®—æ³•çš„å°è£…ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…·æœ‰å‰é¡¹æ£€å¯Ÿçš„å›æº¯ç®—æ³•ã€‚ä¸ä»…åœ¨ pods ä¸­ï¼ŒBundler å’Œ RubyGems ä¹Ÿæ˜¯ä½¿ç”¨è¿™ä¸€å¥—ä»²è£ç®—æ³•ã€‚</li>
<li><strong>Xcodeproj</strong>ï¼šé€šè¿‡ Ruby æ¥å¯¹ Xcode projects è¿›è¡Œåˆ›å»ºäºä¿®æ”¹ã€‚å¦‚ï¼šè„šæœ¬ç®¡ç†ã€libraries æ„å»ºã€Xcode workspece å’Œé…ç½®æ–‡ä»¶çš„ç®¡ç†ã€‚</li>
<li><strong>cocoapods-plugins</strong>ï¼šæ’ä»¶ç®¡ç†ï¼Œå…¶ä¸­æœ‰ pod plugins å‘½ä»¤å¸®åŠ©ä½ è·å–çš„å¯ç”¨æ’ä»¶åˆ—è¡¨ä»¥åŠå¼€å‘ä¸€ä¸ªæ–°æ’ä»¶ç­‰åŠŸèƒ½ï¼Œå…·ä½“å¯ç”¨ <code>pod plugins --help</code> äº†è§£ã€‚</li>
</ul>
<h3 id="pod-install-åšäº†ä»€ä¹ˆ"><a href="#pod-install-åšäº†ä»€ä¹ˆ" class="headerlink" title="pod install åšäº†ä»€ä¹ˆ"></a>pod install åšäº†ä»€ä¹ˆ</h3><p>æ‰§è¡Œ <code>pod install --verbose</code>ï¼Œä¼šæ˜¾ç¤º pod install è¿‡ç¨‹ä¸­çš„æ›´å¤š debugging ä¿¡æ¯ã€‚ä¸‹æ–‡ä¸»è¦å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.desgard.com/2020/08/17/cocoapods-story-2.html">æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶</a></p>
<p>ç»è¿‡æ¶ˆæ¯è½¬å‘ä¸ CLAide å‘½ä»¤è§£æï¼Œæœ€ç»ˆè°ƒç”¨äº† CocoaPods/lib/cocoapods/installer.rb çš„ install! å‡½æ•°ï¼Œä¸»è¦æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://raw.githubusercontent.com/xuhaodong1/resource/master/image-20221216145652667.png" style="zoom:45%;">

<pre><code class="ruby">def install!
    prepare
    resolve_dependencies
    download_dependencies
    validate_targets
    clean_sandbox
    if installation_options.skip_pods_project_generation?
        show_skip_pods_project_generation_message
        run_podfile_post_install_hooks
    else
    integrate
    end
    write_lockfiles
    perform_post_install_actions
end
</code></pre>
<h4 id="1-Install-ç¯å¢ƒå‡†å¤‡ï¼ˆprepareï¼‰"><a href="#1-Install-ç¯å¢ƒå‡†å¤‡ï¼ˆprepareï¼‰" class="headerlink" title="1. Install ç¯å¢ƒå‡†å¤‡ï¼ˆprepareï¼‰"></a>1. Install ç¯å¢ƒå‡†å¤‡ï¼ˆprepareï¼‰</h4><pre><code class="ruby">def prepare
  # å¦‚æœæ£€æµ‹å‡ºå½“å‰ç›®å½•æ˜¯ Podsï¼Œç›´æ¥ raise ç»ˆæ­¢
  if Dir.pwd.start_with?(sandbox.root.to_path)
    message = 'Command should be run from a directory outside Pods directory.'
    message &lt;&lt; "\n\n\tCurrent directory is #{UI.path(Pathname.pwd)}\n"
    raise Informative, message
  end
  UI.message 'Preparing' do
    # å¦‚æœ lock æ–‡ä»¶çš„ CocoaPods ä¸»ç‰ˆæœ¬å’Œå½“å‰ç‰ˆæœ¬ä¸åŒï¼Œå°†ä»¥æ–°ç‰ˆæœ¬çš„é…ç½®å¯¹ xcodeproj å·¥ç¨‹æ–‡ä»¶è¿›è¡Œæ›´æ–°
    deintegrate_if_different_major_version
    # å¯¹ sandbox(Pods) ç›®å½•å»ºç«‹å­ç›®å½•ç»“æ„
    sandbox.prepare
    # æ£€æµ‹ PluginManager æ˜¯å¦æœ‰ pre-install çš„ plugin
    ensure_plugins_are_installed!
    # æ‰§è¡Œæ’ä»¶ä¸­ pre-install çš„æ‰€æœ‰ hooks æ–¹æ³•
    run_plugins_pre_install_hooks
  end
end
</code></pre>
<p>åœ¨ prepare é˜¶æ®µä¼šå®Œæˆ <code>pod install</code> çš„ç¯å¢ƒå‡†å¤‡ï¼ŒåŒ…æ‹¬ç›®å½•ç»“æ„ã€ç‰ˆæœ¬ä¸€è‡´æ€§ä»¥åŠ <code>pre_install</code> çš„ hookã€‚</p>
<h4 id="2-è§£å†³ä¾èµ–å†²çªï¼ˆresolve-dependenciesï¼‰"><a href="#2-è§£å†³ä¾èµ–å†²çªï¼ˆresolve-dependenciesï¼‰" class="headerlink" title="2. è§£å†³ä¾èµ–å†²çªï¼ˆresolve dependenciesï¼‰"></a>2. è§£å†³ä¾èµ–å†²çªï¼ˆresolve dependenciesï¼‰</h4><pre><code class="ruby">def resolve_dependencies
    # è·å– Sources
    plugin_sources = run_source_provider_hooks
    # åˆ›å»ºä¸€ä¸ª Analyzer
    analyzer = create_analyzer(plugin_sources)
    # å¦‚æœå¸¦æœ‰ repo_update æ ‡è®°
    UI.section 'Updating local specs repositories' do
        # æ‰§è¡Œ Analyzer çš„æ›´æ–° Repo æ“ä½œ
        analyzer.update_repositories
    end if repo_update?
    UI.section 'Analyzing dependencies' do
        # ä» analyzer å–å‡ºæœ€æ–°çš„åˆ†æç»“æœï¼Œ@analysis_resultï¼Œ@aggregate_targetsï¼Œ@pod_targets
        analyze(analyzer)
        # æ‹¼å†™é”™è¯¯é™çº§è¯†åˆ«ï¼Œç™½åå•è¿‡æ»¤
        validate_build_configurations
    end
    # å¦‚æœ deployment? ä¸º trueï¼Œä¼šéªŒè¯ podfile &amp; lockfile æ˜¯å¦éœ€è¦æ›´æ–°
    UI.section 'Verifying no changes' do
        verify_no_podfile_changes!
        verify_no_lockfile_changes!
    end if deployment?
    analyzer
end
</code></pre>
<p>é€šè¿‡ Podfileã€Podfile.lock ä»¥åŠ manifest.lock ç­‰ç”Ÿæˆ Analyzer å¯¹è±¡ï¼Œå…¶å†…éƒ¨ä¼šä½¿ç”¨ä¸ª Molinillo ç®—æ³•è§£æå¾—åˆ°ä¸€å¼ ä¾èµ–å…³ç³»è¡¨ï¼Œè¿›è¡Œä¸€ç³»åˆ—çš„åˆ†æä¸ä¾èµ–å†²çªè§£å†³ã€‚</p>
<h4 id="3-ä¸‹è½½ä¾èµ–æ–‡ä»¶ï¼ˆdownload-dependenciesï¼‰"><a href="#3-ä¸‹è½½ä¾èµ–æ–‡ä»¶ï¼ˆdownload-dependenciesï¼‰" class="headerlink" title="3. ä¸‹è½½ä¾èµ–æ–‡ä»¶ï¼ˆdownload dependenciesï¼‰"></a>3. ä¸‹è½½ä¾èµ–æ–‡ä»¶ï¼ˆdownload dependenciesï¼‰</h4><pre><code class="ruby">def download_dependencies
  UI.section 'Downloading dependencies' do
    # æ„é€  Pod Source Installer
    install_pod_sources
    # æ‰§è¡Œ podfile å®šä¹‰çš„ pre install çš„ hooks
    run_podfile_pre_install_hooks
    # æ ¹æ®é…ç½®æ¸…ç† pod sources ä¿¡æ¯ï¼Œä¸»è¦æ˜¯æ¸…ç†æ— ç”¨ platform ç›¸å…³å†…å®¹
    clean_pod_sources
  end
end
</code></pre>
<p>â€‹    ç»è¿‡å‰é¢åˆ†æä¸è§£å†³ä¾èµ–å†²çªåï¼Œè¿™æ˜¯ä¼šè¿›è¡Œä¾èµ–ä¸‹è½½ã€‚ä¼šæ ¹æ®ä¾èµ–ä¿¡æ¯æ˜¯å¦è¢«æ–°æ·»åŠ æˆ–è€…ä¿®æ”¹ç­‰ä¿¡æ¯è¿›è¡Œä¸‹è½½ï¼ŒåŒæ—¶ä¸‹è½½åä¹Ÿä¼šåœ¨æœ¬åœ°ç•™æœ‰ä¸€ä»½ç¼“å­˜ï¼Œå…¶ç›®å½•åœ¨ ï½/Library/Caches/CocoaPods ã€‚</p>
<h4 id="4-éªŒè¯-targetsï¼ˆvalidate-targetsï¼‰"><a href="#4-éªŒè¯-targetsï¼ˆvalidate-targetsï¼‰" class="headerlink" title="4. éªŒè¯ targetsï¼ˆvalidate targetsï¼‰"></a>4. éªŒè¯ targetsï¼ˆvalidate targetsï¼‰</h4><pre><code class="ruby">def validate_targets
    validator = Xcode::TargetValidator.new(aggregate_targets, pod_targets, installation_options)
    validator.validate!
end

def validate!
    verify_no_duplicate_framework_and_library_names
    verify_no_static_framework_transitive_dependencies
    verify_swift_pods_swift_version
    verify_swift_pods_have_module_dependencies
    verify_no_multiple_project_names if installation_options.generate_multiple_pod_projects?
end
</code></pre>
<p><strong>verify_no_duplicate_framework_and_library_names</strong>ï¼šéªŒè¯æ˜¯å¦æœ‰é‡åçš„ framework / library</p>
<p><strong>verify_no_static_framework_transitive_dependencies</strong>ï¼šéªŒè¯åŠ¨æ€åº“æ˜¯å¦æœ‰é™æ€é“¾æ¥åº“ä¾èµ–ã€‚ä¸ªäººè®¤ä¸ºï¼Œè¿™ä¸ªéªŒè¯æ˜¯ä¸å¿…è¦çš„ï¼Œèµ·ç ä¸å¿…è¦ errorã€‚</p>
<p><strong>verify_swift_pods_swift_version</strong>ï¼šéªŒè¯ Swift pod çš„ Swift ç‰ˆæœ¬é…ç½®ä¸”ç›¸äº’å…¼å®¹</p>
<p><strong>verify_swift_pods_have_module_dependencies</strong>ï¼šéªŒè¯ Swift pod æ˜¯å¦æ”¯æŒ module</p>
<p><strong>verify_no_multiple_project_names</strong>ï¼šéªŒè¯æ²¡æœ‰é‡åçš„ project åç§°</p>
<h4 id="5-ç”Ÿæˆå·¥ç¨‹ï¼ˆIntegrateï¼‰"><a href="#5-ç”Ÿæˆå·¥ç¨‹ï¼ˆIntegrateï¼‰" class="headerlink" title="5. ç”Ÿæˆå·¥ç¨‹ï¼ˆIntegrateï¼‰"></a>5. ç”Ÿæˆå·¥ç¨‹ï¼ˆIntegrateï¼‰</h4><pre><code class="ruby">def integrate
    generate_pods_project
    if installation_options.integrate_targets?
        # é›†æˆç”¨æˆ·é…ç½®ï¼Œè¯»å–ä¾èµ–é¡¹ï¼Œä½¿ç”¨ xcconfig æ¥é…ç½®
        integrate_user_project
    else
        UI.section 'Skipping User Project Integration'
    end
end

def generate_pods_project
    # åˆ›å»º stage sanbox ç”¨äºä¿å­˜å®‰è£…å‰çš„æ²™ç›’çŠ¶æ€ï¼Œä»¥æ”¯æŒå¢é‡ç¼–è¯‘çš„å¯¹æ¯”
    stage_sandbox(sandbox, pod_targets)
    # æ£€æŸ¥æ˜¯å¦æ”¯æŒå¢é‡ç¼–è¯‘ï¼Œå¦‚æœæ”¯æŒå°†è¿”å› cache result
    cache_analysis_result = analyze_project_cache
    # éœ€è¦é‡æ–°ç”Ÿæˆçš„ target
    pod_targets_to_generate = cache_analysis_result.pod_targets_to_generate
    # éœ€è¦é‡æ–°ç”Ÿæˆçš„ aggregate target
    aggregate_targets_to_generate = cache_analysis_result.aggregate_targets_to_generate

    # æ¸…ç†éœ€è¦é‡æ–°ç”Ÿæˆ target çš„ header å’Œ pod folders
    clean_sandbox(pod_targets_to_generate)
    # ç”Ÿæˆ Pod Projectï¼Œç»„è£… sandbox ä¸­æ‰€æœ‰ Pod çš„ pathã€build settingã€æºæ–‡ä»¶å¼•ç”¨ã€é™æ€åº“æ–‡ä»¶ã€èµ„æºæ–‡ä»¶ç­‰
    create_and_save_projects(pod_targets_to_generate, aggregate_targets_to_generate,
                                cache_analysis_result.build_configurations, cache_analysis_result.project_object_version)

    # SandboxDirCleaner ç”¨äºæ¸…ç†å¢é‡ pod å®‰è£…ä¸­çš„æ— ç”¨ headersã€target support files ç›®å½•
    SandboxDirCleaner.new(sandbox, pod_targets, aggregate_targets).clean!
    # æ›´æ–°å®‰è£…åçš„ cache ç»“æœåˆ°ç›®å½• `Pods/.project_cache` ä¸‹
    update_project_cache(cache_analysis_result, target_installation_results)
end
</code></pre>
<p>å°†ä¹‹å‰ç‰ˆæœ¬ä»²è£çš„æ‰€æœ‰ç»„ä»¶é€šè¿‡ project æ–‡ä»¶çš„å½¢å¼ç»„ç»‡èµ·æ¥ï¼Œå¹¶å¯¹ project ä¸­åšä¸€äº›ç”¨æˆ·æŒ‡å®šçš„é…ç½®ã€‚</p>
<h4 id="6-å†™å…¥ä¾èµ–ï¼ˆwrite-lockfilesï¼‰"><a href="#6-å†™å…¥ä¾èµ–ï¼ˆwrite-lockfilesï¼‰" class="headerlink" title="6. å†™å…¥ä¾èµ–ï¼ˆwrite lockfilesï¼‰"></a>6. å†™å…¥ä¾èµ–ï¼ˆwrite lockfilesï¼‰</h4><pre><code class="ruby">def write_lockfiles
  @lockfile = generate_lockfile
  UI.message "- Writing Lockfile in #{UI.path config.lockfile_path}" do
    # No need to invoke Sandbox#update_changed_file here since this logic already handles checking if the
    # contents of the file are the same.
    @lockfile.write_to_disk(config.lockfile_path)
  end
  UI.message "- Writing Manifest in #{UI.path sandbox.manifest_path}" do
    # No need to invoke Sandbox#update_changed_file here since this logic already handles checking if the
    # contents of the file are the same.
    @lockfile.write_to_disk(sandbox.manifest_path)
  end
end
</code></pre>
<p>å°†ä¾èµ–æ›´æ–°å†™å…¥ Podfile.lock ä¸ Manifest.lock</p>
<h4 id="7-ç»“æŸå›è°ƒï¼ˆperform-post-install-actionï¼‰"><a href="#7-ç»“æŸå›è°ƒï¼ˆperform-post-install-actionï¼‰" class="headerlink" title="7. ç»“æŸå›è°ƒï¼ˆperform post install actionï¼‰"></a>7. ç»“æŸå›è°ƒï¼ˆperform post install actionï¼‰</h4><pre><code class="ruby">def perform_post_install_actions
  # è°ƒç”¨ HooksManager æ‰§è¡Œæ¯ä¸ªæ’ä»¶çš„ post_install æ–¹æ³• 
  run_plugins_post_install_hooks
  # æ‰“å°è¿‡æœŸ pod target è­¦å‘Š
  warn_for_deprecations
  # å¦‚æœ pod é…ç½®äº† script phases è„šæœ¬ï¼Œä¼šä¸»åŠ¨è¾“å‡ºä¸€æ¡æç¤ºæ¶ˆæ¯
  warn_for_installed_script_phases
  # è­¦å‘Šç§»é™¤çš„ master specs repo çš„ specs
  warn_for_removing_git_master_specs_repo
  # è¾“å‡ºç»“æŸä¿¡æ¯ `Pod installation complete!`
  print_post_install_message
end
</code></pre>
<p>æœ€åçš„æ”¶å°¾å·¥ä½œï¼Œè¿›è¡Œ <code>post install action</code> çš„ hook æ‰§è¡Œä»¥åŠä¸€äº› warning æ‰“å°ã€‚</p>
<h2 id="CocoaPods-Plugins"><a href="#CocoaPods-Plugins" class="headerlink" title="CocoaPods + Plugins"></a>CocoaPods + Plugins</h2><p>æ—©åœ¨ 2013 å¹´ï¼ŒCocoaPods å°±æ·»åŠ äº†å¯¹æ’ä»¶çš„æ”¯æŒï¼Œä»¥æ·»åŠ ä¸ç¬¦åˆä¾èµ–ç®¡ç†å’Œç”Ÿæ€ç³»ç»Ÿå¢é•¿ä¸ºä¸»è¦ç›®æ ‡çš„åŠŸèƒ½ã€‚CocoaPods Plugins å¯ä»¥ï¼šåœ¨ install å‰åæ·»åŠ  hookã€æ·»åŠ æ–°å‘½ä»¤åˆ° podã€ä»¥åŠåˆ©ç”¨ Ruby åŠ¨æ€æ€§åšä»»ä½•äº‹ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹å¸¸è§çš„æ’ä»¶ï¼š</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/leavez/cocoapods-binary">cocoapods-binary</a>ï¼šä¸€ä¸ªæ¯”è¾ƒæ—©æœŸçš„äºŒè¿›åˆ¶æ’ä»¶åº“ï¼Œæ˜¯è¯¸å¤šäºŒè¿›åˆ¶æ–¹æ¡ˆçš„çµæ„Ÿæ¥æº</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/wordpress-mobile/cocoapods-repo-update">cocoapods-repo-update</a>ï¼šè‡ªåŠ¨åŒ– pod repo update</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/upgrad/cocoapods-integrate-flutter">cocoapods-integrate-flutter</a>ï¼šå°† flutter ä¸ç°æœ‰ iOS åº”ç”¨ç¨‹åºé›†æˆ</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/alibaba/cocoapods-uploader">cocoapods-uploader</a>ï¼šä¸Šä¼ æ–‡ä»¶/ç›®å½•åˆ°è¿œç¨‹ä»“åº“</p>
</li>
</ul>
<p>psï¼šè®¸å¤šæ’ä»¶å¯èƒ½è®¸ä¹…æœªç»´æŠ¤ï¼Œè¯»è€…ä½¿ç”¨éœ€è‡ªè¡Œæ–Ÿé…Œã€‚</p>
<h2 id="ä¸å¤ªå¸¸è§æ¦‚å¿µ"><a href="#ä¸å¤ªå¸¸è§æ¦‚å¿µ" class="headerlink" title="ä¸å¤ªå¸¸è§æ¦‚å¿µ"></a>ä¸å¤ªå¸¸è§æ¦‚å¿µ</h2><p>CocoaPods çš„é…ç½®å†…å®¹å‡ ä¹åŒ…å«äº† Xcode Build çš„æ–¹æ–¹é¢é¢ï¼Œå› æ­¤å­˜åœ¨è®¸å¤šä¸å¤ªå¸¸è§çš„æ¦‚å¿µï¼Œåœ¨æ­¤åšä¸€ä¸ªé“¾æ¥èšåˆä»¥ä¾›å‚è€ƒã€‚</p>
<ul>
<li>Clang Module / module_map / umbrella headerï¼šClang Module æ˜¯ Clang 16.0.0 ä¸­å¼•å…¥çš„æ¦‚å¿µï¼Œç”¨ä»¥è§£å†³ #include / #import å¤´æ–‡ä»¶å¼•å…¥å¯¼è‡´çš„ç›¸å…³é—®é¢˜ï¼›module_map æ˜¯ç”¨ä»¥æè¿° clang module ä¸ header çš„å…³ç³»ï¼›umbrella header åˆ™æ˜¯ module_map ä¸­çš„è¯­æ³•è§„èŒƒï¼Œè¡¨ç¤ºæŒ‡å®šç›®å½•ä¸­çš„å¤´æ–‡ä»¶éƒ½åº”åŒ…å«åœ¨æ¨¡å—ä¸­ã€‚</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://clang.llvm.org/docs/Modules.html#introduction">Modules</a></p>
<p><a target="_blank" rel="noopener" href="http://chuquan.me/2021/02/11/clang-module/">Clang Module</a></p>
<p><a target="_blank" rel="noopener" href="https://www.stephenw.cc/2017/08/23/llvm-modules/">LLVM ä¸­çš„ Module</a></p>
<ul>
<li>Hmap / Xcode Header / CocoaPods Headers</li>
</ul>
<p>Header Map æ˜¯ä¸€ç»„å¤´æ–‡ä»¶ä¿¡æ¯æ˜ å°„è¡¨ï¼Œç”¨ .hmap åç¼€è¡¨ç¤ºï¼Œæ•´ä½“ç»“æ„ä»¥ Key-Value å½¢å¼å­˜å‚¨ï¼›Keyä¸ºå¤´æ–‡ä»¶åç§°ã€Value ä¸º å¤´æ–‡ä»¶ç‰©ç†åœ°å€ã€‚</p>
<p>Xcode Phases - Header åœ¨æ„å»ºé…ç½®ä¸­åˆ†ä¸º publicã€private ä¸ project ï¼Œç”¨ä»¥ä¸ target å…³è”ï¼›å…¶ä¸­ public ã€private å°±å¤åˆ¶åˆ°æœ€ç»ˆäº§ç‰©çš„ header å’Œ PrivateHeaders ä¸­ï¼Œè€Œ project å¤´æ–‡ä»¶ä¸å¯¹å¤–ä½¿ç”¨ï¼Œåˆ™ä¸ä¼šæ”¾åˆ°æœ€ç»ˆäº§ç‰©ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://tech.meituan.com/2021/02/25/cocoapods-hmap-prebuilt.html">ä¸€æ¬¾å¯ä»¥è®©å¤§å‹iOSå·¥ç¨‹ç¼–è¯‘é€Ÿåº¦æå‡50%çš„å·¥å…·</a></p>
<p><a target="_blank" rel="noopener" href="https://help.apple.com/xcode/mac/current/#/dev50bab713d">What are build phases?</a></p>
<ul>
<li>Xcconfigï¼š</li>
</ul>
<p>ä¸€ç§é…ç½®æ–‡ä»¶ï¼Œç”¨ä»¥å¯¹æ„å»ºè®¾ç½®è¿›è¡Œå£°æ˜ä¸ç®¡ç†ï¼Œæ¯”å¦‚åŒºåˆ†ä¸åŒçš„å¼€å‘ç¯å¢ƒç­‰ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://nshipster.com/xcconfig/">Xcode Build Configuration Files</a></p>
<ul>
<li>On demand resourceï¼šWWDC 2015 å¼•å…¥çš„æ¦‚å¿µï¼Œå¯¹èµ„æºæ–‡ä»¶çš„æŒ‰éœ€åŠ è½½ã€‚</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2015/214/">Introducing On Demand Resources</a></p>
<h2 id="ğŸ”—ï¼š"><a href="#ğŸ”—ï¼š" class="headerlink" title="ğŸ”—ï¼š"></a>ğŸ”—ï¼š</h2><p>[1] <a target="_blank" rel="noopener" href="https://cocoapods.org/">Cocoapods.org</a></p>
<p>[2] <a target="_blank" rel="noopener" href="https://medium.com/orion-innovation-turkey/xcode-workspace-with-multiple-projects-1b42f5182c45">Xcode Workspace with multiple projects</a></p>
<p>[3] <a target="_blank" rel="noopener" href="https://objccn.io/issue-6-4/">æ·±å…¥ç†è§£ CocoaPods</a></p>
<p>[4] <a target="_blank" rel="noopener" href="http://chuquan.me/2021/02/14/understand-ios-library-and-framework/">ç³»ç»Ÿç†è§£ iOS åº“ä¸æ¡†æ¶</a></p>
<p>[5] <a target="_blank" rel="noopener" href="https://swiftunwrap.com/article/cocoapods-script-phases/">Cocoapods script phases</a></p>
<p>[6] <a target="_blank" rel="noopener" href="http://chuquan.me/2021/12/24/podfile-analyze-principle/">CocoaPods Podfile è§£æåŸç†</a></p>
<p>[7] <a target="_blank" rel="noopener" href="https://semver.org/">Semantic Versioning 2.0.0</a></p>
<p>[8] <a target="_blank" rel="noopener" href="https://tech.meituan.com/2021/02/25/cocoapods-hmap-prebuilt.html">ä¸€æ¬¾å¯ä»¥è®©å¤§å‹iOSå·¥ç¨‹ç¼–è¯‘é€Ÿåº¦æå‡50%çš„å·¥å…·</a></p>
<p>[9] <a target="_blank" rel="noopener" href="http://chuquan.me/2022/01/07/source-analyze-principle/#more">CocoaPods Source ç®¡ç†æœºåˆ¶</a></p>
<p>[10] <a target="_blank" rel="noopener" href="https://www.desgard.com/2020/06/11/cocoapods-story-1.html#podfilelock">ç‰ˆæœ¬ç®¡ç†å·¥å…·åŠ Ruby å·¥å…·é“¾ç¯å¢ƒ</a></p>
<p>[11] <a target="_blank" rel="noopener" href="https://www.desgard.com/2020/08/17/cocoapods-story-2.html">æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶</a></p>
<p>[12] <a target="_blank" rel="noopener" href="https://binlogo.github.io/post/gong-cheng-xiao-lu-you-hua-cocoapods-you-hua/">å·¥ç¨‹æ•ˆç‡ä¼˜åŒ–ï¼šCocoaPodsä¼˜åŒ–</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2022/12/24/2022-12-24-nihao%E7%9A%842022%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/" title="nihao' 2022å¹´ç»ˆæ€»ç»“"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: nihao' 2022å¹´ç»ˆæ€»ç»“</span></a><a class="button is-default" href="/2022/07/08/iOS%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E4%BB%A5%E5%8F%8A%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6/" title="iOSä¸­çš„äº‹ä»¶ä»¥åŠäº‹ä»¶ä¼ é€’æœºåˆ¶"><span class="has-text-weight-semibold">Next: iOSä¸­çš„äº‹ä»¶ä»¥åŠäº‹ä»¶ä¼ é€’æœºåˆ¶</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="xuhaodong1/xuhaodong1.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/xuhaodong1"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- çŸ¥ä¹--><!-- é¢†è‹±--><!-- è„¸ä¹¦--></section><p> <span>PV:</span><span id="busuanzi_value_site_pv"></span><span>  UV: </span><span id="busuanzi_value_site_uv"></span></p><p><span>Copyright Â©</span><span> nihao 2023</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>